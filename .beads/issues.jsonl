{"id":"docs-7b4","title":"Epic 7: Fix Broken Links and Content Issues","description":"## Summary\nResolve all broken links and content issues identified during the documentation audit. This includes GitBook orphan page references, absolute GitBook editor URLs, and anchor ID mismatches.\n\n## Context\nThis project is a Next.js + Markdoc documentation site in the `documentation/` directory. The content was migrated from GitBook. By the time this epic runs, Epic 3 (Content Migration) has moved all files into `documentation/pages/` and done initial cleanup. However, some broken links may remain that require human judgment to resolve.\n\nAll content files are now in `documentation/pages/` (not the old root-level locations). Internal links should use paths without `.md` extensions.\n\n## Broken Links Inventory\n\n### Category 1: GitBook Orphan Page References (3 instances)\nWhen GitBook exports to Git, internal cross-references that fail to resolve become `/broken/pages/XXXXX` links. These need to be resolved or removed.\n\n| File (post-migration path) | Broken Link | Context |\n|---|---|---|\n| `pages/index.md` | `/broken/pages/gNQzZ9R1b3NKrJoQ0Iqa` | Read the surrounding text to determine what this was supposed to link to. It's on the landing/welcome page. |\n| `pages/lexicons/introduction-to-lexicons.md` | `/broken/pages/3UwgsMpD20ErXurhzmTh` | Read the surrounding text -- likely links to one of the lexicon pages |\n| `pages/lexicons/introduction-to-lexicons.md` | `/broken/pages/FdVczwFhTBj7n5nszh0P` | Read the surrounding text -- likely links to one of the lexicon pages |\n\n**Resolution approach:**\n1. Open each file and read the surrounding text around the broken link\n2. Infer what page the link was supposed to point to based on the link text and context\n3. If the target can be determined (e.g., \"General Lexicons\" probably links to `/lexicons/general-lexicons`), replace with the correct path\n4. If the target cannot be determined, remove the `[text](/broken/pages/...)` link syntax but keep the text as plain text. Add a `\u003c!-- TODO: broken link from GitBook migration --\u003e` HTML comment\n\n### Category 2: Absolute GitBook Editor URL (1 instance)\n| File | Broken Link |\n|---|---|\n| `pages/lexicons/hypercerts-lexicons/activity-claim.md` | `https://app.gitbook.com/o/uxU8o4s6mrp88yBisLn5/s/8dkOAon1uQbyqL8RomaJ/hypercert-claim-lexicons/the-impact-and-work-space` |\n\n**Resolution:** The URL path ends with `the-impact-and-work-space`. Replace with the relative internal link `/getting-started/the-impact-and-work-space`.\n\n### Category 3: Anchor ID Mismatches (2 instances)\n| File | Link | Problem | Fix |\n|---|---|---|---|\n| `pages/getting-started/the-impact-and-work-space.md` | Self-referencing `#the-impact-space` | No heading with this anchor exists in the file | Read the file to find the closest matching heading and fix the anchor. If no heading matches, remove the link. |\n| `pages/lexicons/general-lexicons/location.md` | Self-referencing `#locationtype` | The heading is \"### Location Type\" which generates anchor `#location-type` (hyphenated) | Change `#locationtype` to `#location-type` |\n\n## Verification Steps\nAfter fixing all links, run these checks:\n```bash\n# Check for any remaining GitBook artifacts\ngrep -r '/broken/pages/' documentation/pages/\ngrep -r 'app.gitbook.com' documentation/pages/\n\n# Should all return zero results\n```\n\nAlso manually verify:\n- Open each fixed link in the dev server to confirm it navigates correctly\n- For anchor links, click them and verify they scroll to the correct heading\n\n## Acceptance Criteria\n- All 3 `/broken/pages/...` links are either resolved to correct internal paths or removed (text preserved)\n- The absolute GitBook editor URL in activity-claim.md is replaced with `/getting-started/the-impact-and-work-space`\n- Both anchor mismatches are fixed to point to valid heading IDs\n- `grep -r '/broken/' documentation/pages/` returns zero results\n- `grep -r 'app.gitbook.com' documentation/pages/` returns zero results\n- All fixed links work when tested in the browser via `npm run dev`\n","status":"closed","priority":1,"issue_type":"epic","owner":"sharfy.adamantine@gmail.com","created_at":"2026-02-13T13:45:06.195729+13:00","created_by":"Sharfy Adamantine","updated_at":"2026-02-14T13:18:28.396574+13:00","closed_at":"2026-02-14T13:18:28.396576+13:00","dependencies":[{"issue_id":"docs-7b4","depends_on_id":"docs-qsc","type":"blocks","created_at":"2026-02-13T13:45:06.198001+13:00","created_by":"Sharfy Adamantine"}]}
{"id":"docs-7dv","title":"Epic 4: Navigation and Layout System","description":"## Summary\nBuild a three-column page layout and programmatic navigation system to replace GitBook's `SUMMARY.md`-based navigation. The layout should follow the design language used by Stripe's documentation (docs.stripe.com): a left sidebar for navigation, a centered content column, and a right-side table of contents with scroll spy.\n\n## Context\nThis project is a Next.js + Markdoc documentation site in the `documentation/` directory. GitBook uses a file called `SUMMARY.md` with nested Markdown lists to define navigation. We need to replace this with React components.\n\nBy the time this epic runs:\n- Epic 1 has scaffolded the Next.js project\n- `pages/_app.js` exists and wraps all pages\n- Content `.md` files are in `pages/` (from Epic 3)\n\n### Current SUMMARY.md navigation structure:\n```markdown\n# Table of contents\n* [Welcome to the Hypercerts Protocol](README.md)\n## Getting Started\n* [Why we're building Hypercerts](getting-started/why-were-building-hypercerts.md)\n* [Introduction to Impact Claims](getting-started/introduction-to-impact-claims.md)\n* [The Impact and Work Space](getting-started/the-impact-and-work-space.md)\n* [The Hypercerts Infrastructure](getting-started/the-hypercerts-infrastructure.md)\n* [Installing the SDK](getting-started/installing-the-sdk.md)\n## Lexicons\n* [Introduction to Lexicons](lexicons/introduction-to-lexicons.md)\n* [General Lexicons](lexicons/general-lexicons/README.md)\n  * [Shared Defs](lexicons/general-lexicons/shared-defs.md)\n  * [Location](lexicons/general-lexicons/location.md)\n* [Hypercerts Lexicons](lexicons/hypercerts-lexicons/README.md)\n  * [Activity Claim](lexicons/hypercerts-lexicons/activity-claim.md)\n  * [Contribution](lexicons/hypercerts-lexicons/contribution.md)\n  * [Evaluation](lexicons/hypercerts-lexicons/evaluation.md)\n  * [Measurement](lexicons/hypercerts-lexicons/measurement.md)\n  * [Attachment](lexicons/hypercerts-lexicons/attachment.md)\n  * [Rights](lexicons/hypercerts-lexicons/rights.md)\n  * [Collection](lexicons/hypercerts-lexicons/collection.md)\n---\n* [Deep Dive: The Work Scope](deep-dive-the-work-scope.md)\n```\n\n## Design Language (Stripe-Inspired)\n\nThe layout should follow these Stripe documentation patterns:\n\n### Three-column layout:\n```\n┌──────────────────────────────────────────────────────────┐\n│  Header: Site title + optional search                     │\n├────────────┬──────────────────────────────┬───────────────┤\n│            │                              │               │\n│  Left      │  Main Content                │  Right TOC    │\n│  Sidebar   │  (max-width ~720px)          │  (~200px)     │\n│  (~240px)  │                              │               │\n│            │                              │  - Section 1  │\n│  Section   │  # Page Title                │  - Section 2  │\n│  Header    │                              │  - Section 3  │\n│  ├─ Link   │  Body text...                │               │\n│  ├─ Link   │                              │               │\n│  └─ Link   │  ## Section 1                │               │\n│            │  More text...                 │               │\n│  Section   │                              │               │\n│  Header    │  ## Section 2                │               │\n│  ├─ Link   │  Even more text...           │               │\n│  └─ Link   │                              │               │\n│            │  ┌─────────┬──────────┐      │               │\n│            │  │ ← Prev  │ Next →   │      │               │\n│            │  └─────────┴──────────┘      │               │\n├────────────┴──────────────────────────────┴───────────────┤\n```\n\n### Visual characteristics:\n- **Background**: Pure white (#ffffff) everywhere\n- **Sidebar**: 240px wide, sticky/fixed position, scrolls independently. Right border: 1px solid #ebeef1 (very subtle gray)\n- **Content area**: Max-width ~720px, centered in the remaining space with padding 32px on each side\n- **Right TOC**: ~200px wide, sticky, shows H2-level headings from current page, highlights current section as user scrolls (scroll spy)\n- **Section headers in sidebar**: Small text, semibold (font-weight 600), uppercase or regular case, color #687385 (secondary gray). NOT clickable -- they are category labels\n- **Nav items in sidebar**: Regular weight (400), color #414552 (dark gray). On hover: slight background tint. Active item: bold text (600) + light blue-gray background tint\n- **Nesting**: One level of indent for child pages (e.g., \"Shared Defs\" indented under \"General Lexicons\")\n- **Pagination**: Previous/Next links at the bottom of content area, styled as a flex row with left/right alignment\n\n## What You Need to Create\n\n### 1. Navigation config -- `lib/navigation.js`\n```js\nexport const navigation = [\n  { title: 'Welcome', path: '/' },\n  {\n    section: 'Getting Started',\n    children: [\n      { title: \"Why We're Building Hypercerts\", path: '/getting-started/why-were-building-hypercerts' },\n      { title: 'Introduction to Impact Claims', path: '/getting-started/introduction-to-impact-claims' },\n      { title: 'The Impact and Work Space', path: '/getting-started/the-impact-and-work-space' },\n      { title: 'The Hypercerts Infrastructure', path: '/getting-started/the-hypercerts-infrastructure' },\n      { title: 'Installing the SDK', path: '/getting-started/installing-the-sdk' },\n    ]\n  },\n  {\n    section: 'Lexicons',\n    children: [\n      { title: 'Introduction to Lexicons', path: '/lexicons/introduction-to-lexicons' },\n      {\n        title: 'General Lexicons',\n        path: '/lexicons/general-lexicons',\n        children: [\n          { title: 'Shared Defs', path: '/lexicons/general-lexicons/shared-defs' },\n          { title: 'Location', path: '/lexicons/general-lexicons/location' },\n        ]\n      },\n      {\n        title: 'Hypercerts Lexicons',\n        path: '/lexicons/hypercerts-lexicons',\n        children: [\n          { title: 'Activity Claim', path: '/lexicons/hypercerts-lexicons/activity-claim' },\n          { title: 'Contribution', path: '/lexicons/hypercerts-lexicons/contribution' },\n          { title: 'Evaluation', path: '/lexicons/hypercerts-lexicons/evaluation' },\n          { title: 'Measurement', path: '/lexicons/hypercerts-lexicons/measurement' },\n          { title: 'Evidence', path: '/lexicons/hypercerts-lexicons/attachment' },\n          { title: 'Rights', path: '/lexicons/hypercerts-lexicons/rights' },\n          { title: 'Collection', path: '/lexicons/hypercerts-lexicons/collection' },\n        ]\n      }\n    ]\n  },\n  { title: 'Deep Dive: The Work Scope', path: '/deep-dive-the-work-scope' },\n];\n```\n\nItems with `section` are non-clickable category headers. Items with `path` are clickable nav links. Items with `children` can be expanded/collapsed.\n\n### 2. Sidebar component -- `components/Sidebar.js`\n- Renders the navigation tree recursively\n- Uses `next/router` to detect the current path and highlight the active item\n- Section headers rendered as non-clickable labels (semibold, secondary gray, small text)\n- Active item gets bold weight + subtle background highlight\n- Child items are indented ~16px from their parent\n- Collapsible groups: items with children auto-expand when any child is active\n- On mobile (\u003c 768px): sidebar is hidden, revealed via a hamburger toggle button\n\n### 3. Table of Contents component -- `components/TableOfContents.js`\n- Extracts H2 (and optionally H3) headings from the page content\n- Renders a list of anchor links on the right side\n- Implements scroll spy: highlights the heading currently in view as the user scrolls\n- Sticky positioning: stays in view as user scrolls the content\n- Heading text in small font (13px), secondary gray color, active heading in dark color\n\nTo extract headings, you can parse `pageProps.markdoc.content` (the Markdoc AST) or use a client-side approach that queries the DOM for `h2` elements after render.\n\n### 4. Layout component -- `components/Layout.js`\n- Wraps all pages with the three-column layout\n- Accepts `frontmatter` (from `pageProps.markdoc.frontmatter`) and `children`\n- Renders: Header, Sidebar, Main Content, TableOfContents\n- Header: simple bar with site title \"Hypercerts Protocol\" on the left, minimal height (~56px), bottom border 1px #ebeef1\n- Main content area: the `children` prop, wrapped in an `\u003carticle\u003e` tag\n- Pagination: prev/next links at the bottom, derived from the flat list of navigation items\n\n### 5. Update `pages/_app.js`\n```jsx\nimport '../styles/globals.css';\nimport Layout from '../components/Layout';\n// ... component imports for Markdoc tags\n\nexport default function App({ Component, pageProps }) {\n  return (\n    \u003cLayout frontmatter={pageProps.markdoc?.frontmatter}\u003e\n      \u003cComponent {...pageProps} /\u003e\n    \u003c/Layout\u003e\n  );\n}\n```\n\n### 6. Helper: Flatten navigation for prev/next\nCreate a utility function that flattens the navigation tree into an ordered array of `{ title, path }` objects. This is used to compute previous/next page links based on the current path.\n\n## Acceptance Criteria\n- `lib/navigation.js` exports the full navigation tree matching the SUMMARY.md structure\n- `components/Sidebar.js` renders the tree with section headers, active highlighting, and nesting\n- `components/TableOfContents.js` renders right-side H2 anchors with scroll spy\n- `components/Layout.js` implements the three-column layout with header, sidebar, content, and TOC\n- `pages/_app.js` wraps all pages in the Layout component\n- Current page is highlighted in the sidebar\n- Prev/next pagination works at the bottom of each page\n- Layout is responsive: sidebar and TOC collapse/hide on mobile (\u003c 768px), hamburger menu reveals sidebar\n- Page title from frontmatter is displayed in the header or as the page `\u003ctitle\u003e`\n- `SUMMARY.md` is no longer needed for navigation (can be deleted in the cleanup epic)\n","status":"closed","priority":1,"issue_type":"epic","owner":"sharfy.adamantine@gmail.com","created_at":"2026-02-13T13:43:02.062194+13:00","created_by":"Sharfy Adamantine","updated_at":"2026-02-14T13:16:23.775047+13:00","closed_at":"2026-02-14T13:16:23.775053+13:00","dependencies":[{"issue_id":"docs-7dv","depends_on_id":"docs-c34","type":"blocks","created_at":"2026-02-13T13:43:02.063743+13:00","created_by":"Sharfy Adamantine"}]}
{"id":"docs-c34","title":"Epic 1: Scaffold Next.js + Markdoc Project","description":"## Summary\nSet up a Next.js project with Markdoc integration inside the existing `documentation/` directory. This is the foundation that all other migration work depends on. The final documentation site should follow a Stripe-docs-inspired design language (clean, white, professional, content-focused).\n\n## Current State of the Repository\nThe repository root is at `/Users/sharfy/Code/hypercerts-atproto-documentation`. Inside it:\n- `documentation/` -- contains the current documentation (a GitBook-managed site with NO build toolchain, NO package.json)\n- `.beads/` -- beads issue tracker database (do not modify)\n- `AGENTS.md` -- agent instructions (do not modify)\n\nThe `documentation/` directory currently contains:\n```\ndocumentation/\n├── .gitbook/\n│   └── assets/\n│       ├── hypercert erd.png\n│       └── hypercerts_for_projects.png\n├── README.md                    (landing page)\n├── SUMMARY.md                   (GitBook navigation config)\n├── deep-dive-the-work-scope.md\n├── getting-started/\n│   ├── why-were-building-hypercerts.md\n│   ├── introduction-to-impact-claims.md\n│   ├── the-impact-and-work-space.md\n│   ├── the-hypercerts-infrastructure.md\n│   └── installing-the-sdk.md\n└── lexicons/\n    ├── introduction-to-lexicons.md\n    ├── general-lexicons/\n    │   ├── README.md\n    │   ├── shared-defs.md\n    │   └── location.md\n    └── hypercerts-lexicons/\n        ├── README.md\n        ├── activity-claim.md\n        ├── contribution.md\n        ├── evaluation.md\n        ├── measurement.md\n        ├── attachment.md\n        ├── rights.md\n        └── collection.md\n```\n\nThat's 17 Markdown content files, 1 navigation file (SUMMARY.md), and 2 PNG images. There is no package.json, no JavaScript, no build toolchain.\n\n## What You Need to Do\n\n### 1. Initialize the Next.js project inside `documentation/`\nRun these commands from inside the `documentation/` directory:\n```bash\nnpm init -y\nnpm install next@latest react@latest react-dom@latest @markdoc/markdoc @markdoc/next.js\n```\n\n### 2. Create `next.config.js`\n```js\nconst withMarkdoc = require('@markdoc/next.js');\n\nmodule.exports = withMarkdoc({ mode: 'static' })({\n  pageExtensions: ['md', 'mdoc', 'js', 'jsx', 'ts', 'tsx']\n});\n```\n\n### 3. Add scripts to `package.json`\n```json\n{\n  \"scripts\": {\n    \"dev\": \"next dev\",\n    \"build\": \"next build\",\n    \"start\": \"next start\"\n  }\n}\n```\n\n### 4. Create the directory structure\nCreate these empty directories (content will be added in later epics):\n```\ndocumentation/\n├── components/          # React components (Layout, Sidebar, etc.)\n├── markdoc/\n│   ├── tags/            # Custom Markdoc tag definitions\n│   └── nodes/           # Custom Markdoc node overrides\n├── pages/               # Next.js pages (content .md files go here)\n│   └── _app.js          # App wrapper\n├── public/\n│   └── images/          # Static assets (images)\n├── styles/\n│   └── globals.css      # Global stylesheet\n├── next.config.js\n├── package.json\n└── .gitignore\n```\n\n### 5. Create `pages/_app.js`\nA minimal app wrapper that imports global styles:\n```jsx\nimport '../styles/globals.css';\n\nexport default function App({ Component, pageProps }) {\n  return \u003cComponent {...pageProps} /\u003e;\n}\n```\nNote: The Layout component wrapping will be added in Epic 4 (Navigation \u0026 Layout). For now, just the bare wrapper is needed.\n\n### 6. Create a minimal `styles/globals.css`\nJust enough to verify the site loads:\n```css\n* { box-sizing: border-box; margin: 0; padding: 0; }\nbody { font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif; }\n```\n\n### 7. Create a test page at `pages/index.md`\n```markdown\n---\ntitle: Test Page\n---\n\n# Hello Markdoc\n\nThis is a test page to verify the setup works.\n```\n\n### 8. Create `.gitignore`\n```\nnode_modules/\n.next/\nout/\n```\n\n### 9. Verify\n```bash\nnpm run dev    # Should start at http://localhost:3000\nnpm run build  # Should complete without errors\n```\n\nAfter verifying, you can delete the test `pages/index.md` -- it will be replaced by actual content in Epic 3.\n\n## Acceptance Criteria\n- `documentation/package.json` exists with next, react, react-dom, @markdoc/markdoc, @markdoc/next.js as dependencies\n- `documentation/next.config.js` exists with `withMarkdoc({ mode: 'static' })` and `pageExtensions: ['md', 'mdoc', 'js', 'jsx', 'ts', 'tsx']`\n- Directory structure has: `pages/`, `components/`, `markdoc/`, `markdoc/tags/`, `markdoc/nodes/`, `public/`, `public/images/`, `styles/` directories\n- `pages/_app.js` exists with a basic wrapper that imports globals.css\n- `styles/globals.css` exists with minimal reset\n- `npm run dev` starts the dev server successfully and shows the test page\n- `npm run build` completes without errors\n- `.gitignore` includes node_modules/, .next/, out/\n- The existing GitBook files (README.md, SUMMARY.md, getting-started/, lexicons/, .gitbook/, deep-dive-the-work-scope.md) are NOT deleted or moved yet -- that happens in later epics\n","status":"closed","priority":0,"issue_type":"epic","owner":"sharfy.adamantine@gmail.com","created_at":"2026-02-13T13:41:49.036228+13:00","created_by":"Sharfy Adamantine","updated_at":"2026-02-14T13:03:51.028646+13:00","closed_at":"2026-02-14T13:03:51.028656+13:00"}
{"id":"docs-cij","title":"Epic 6: Images and Asset Migration","description":"## Summary\nMove all image assets from the GitBook-specific `.gitbook/assets/` directory to the standard Next.js `public/images/` directory, rename files to remove spaces, update all references in content files, and delete the old `.gitbook/` directory.\n\n## Context\nThis project is a Next.js + Markdoc documentation site. The project root is `documentation/` inside the repository at `/Users/sharfy/Code/hypercerts-atproto-documentation/documentation/`.\n\nThe current documentation was migrated from GitBook, which stores images in a `.gitbook/assets/` directory. In Next.js, static assets live in the `public/` directory and are served from the root URL path. For example, `public/images/foo.png` is accessible at `/images/foo.png`.\n\nBy the time this epic runs:\n- Epic 1 has created the `public/images/` directory\n- Epic 3 may have already updated image references in content files to use `/images/...` paths and converted `\u003cfigure\u003e` HTML to `{% figure %}` Markdoc tags. Check the current state of the files before making changes.\n\n## Current Image Assets\nThe `documentation/.gitbook/assets/` directory contains 2 PNG files:\n- `hypercerts_for_projects.png` -- referenced in the landing page\n- `hypercert erd.png` -- referenced in the landing page and the impact claims page (note: filename has a SPACE)\n\n## Files That Reference Images\nThese files contain image references (paths may already be updated by Epic 3):\n\n1. **pages/index.md** (was README.md) -- 2 image references:\n   - `.gitbook/assets/hypercerts_for_projects.png`\n   - `.gitbook/assets/hypercert erd.png`\n\n2. **pages/getting-started/introduction-to-impact-claims.md** -- 1 image reference:\n   - `../.gitbook/assets/hypercert erd.png`\n\n## Tasks\n\n### 1. Copy and rename image files\n```bash\ncp 'documentation/.gitbook/assets/hypercerts_for_projects.png' documentation/public/images/hypercerts_for_projects.png\ncp 'documentation/.gitbook/assets/hypercert erd.png' documentation/public/images/hypercert-erd.png\n```\nNote: `hypercert erd.png` is renamed to `hypercert-erd.png` (space replaced with hyphen).\n\n### 2. Update image references in content files\nIf not already done by Epic 3, update all image paths:\n- `.gitbook/assets/hypercerts_for_projects.png` -\u003e `/images/hypercerts_for_projects.png`\n- `.gitbook/assets/hypercert erd.png` -\u003e `/images/hypercert-erd.png`\n- `../.gitbook/assets/hypercert erd.png` -\u003e `/images/hypercert-erd.png`\n\nThese may appear as `{% figure src=\"...\" %}` Markdoc tags or as standard `![](...)` Markdown images or as `\u003cfigure\u003e\u003cimg src=\"...\"\u003e` HTML, depending on what Epic 3 did.\n\n### 3. Delete the .gitbook/ directory\n```bash\nrm -rf documentation/.gitbook\n```\n\n### 4. Verify\n- Confirm `documentation/public/images/` contains both PNGs\n- Run `grep -r '.gitbook/' documentation/pages/` -- should return zero results\n- Run `grep -r '.gitbook/' documentation/components/` -- should return zero results\n- Start dev server (`npm run dev`) and verify images render on the relevant pages\n\n## Acceptance Criteria\n- `documentation/public/images/hypercerts_for_projects.png` exists\n- `documentation/public/images/hypercert-erd.png` exists (no space in filename)\n- All image references in content files point to `/images/...` paths\n- `documentation/.gitbook/` directory is deleted\n- `grep -r '.gitbook/' documentation/pages/` returns zero results\n- Images render correctly when viewing pages in the browser via `npm run dev`\n","status":"closed","priority":2,"issue_type":"epic","owner":"sharfy.adamantine@gmail.com","created_at":"2026-02-13T13:44:34.862052+13:00","created_by":"Sharfy Adamantine","updated_at":"2026-02-14T13:05:11.939424+13:00","closed_at":"2026-02-14T13:05:11.939425+13:00","dependencies":[{"issue_id":"docs-cij","depends_on_id":"docs-c34","type":"blocks","created_at":"2026-02-13T13:44:34.864383+13:00","created_by":"Sharfy Adamantine"}]}
{"id":"docs-d4r","title":"Epic 8: Build Configuration and Vercel Deployment","description":"## Summary\nVerify the Next.js build pipeline works end-to-end, fix any build errors, and configure Vercel deployment for the documentation site.\n\n## Context\nThis project is a Next.js + Markdoc documentation site in the `documentation/` directory inside the repository at `/Users/sharfy/Code/hypercerts-atproto-documentation/documentation/`. All commands should be run from the `documentation/` directory.\n\nBy the time this epic runs, Epics 1-7 have:\n- Scaffolded the Next.js + Markdoc project (Epic 1)\n- Created custom Markdoc tags and React components (Epic 2)\n- Migrated all 17 content files to `pages/` (Epic 3)\n- Built the navigation and layout system (Epic 4)\n- Applied Stripe-inspired styling (Epic 5)\n- Moved images to `public/images/` (Epic 6)\n- Fixed all broken links (Epic 7)\n\n## Tasks\n\n### 1. Verify Local Development Server\n```bash\ncd documentation\nnpm run dev\n```\n- Open http://localhost:3000 in a browser\n- Navigate through ALL pages via the sidebar and verify:\n  - Pages load without console errors\n  - Images display correctly\n  - Tables render with proper styling\n  - Callout boxes display with colored left borders\n  - Column layouts work (side by side on desktop)\n  - Sidebar navigation highlights the current page\n  - Right-side table of contents shows headings\n  - Prev/next pagination links work\n- Fix any runtime errors or warnings\n\n### 2. Verify Production Build\n```bash\ncd documentation\nnpm run build\n```\n- Ensure the build completes with ZERO errors\n- Common issues to watch for:\n  - Missing component imports\n  - Invalid Markdoc tag syntax in .md files\n  - Broken internal links that cause 404s during static generation\n  - CSS module import errors\n- Fix any build-time errors before proceeding\n\n### 3. Test Production Server Locally\n```bash\ncd documentation\nnpm run start\n```\n- Verify the production build serves correctly at http://localhost:3000\n- Spot-check 3-5 pages for rendering issues\n- Verify images load (they should be in `public/images/`)\n\n### 4. Configure Static Export (if desired)\nFor pure static hosting, add `output: 'export'` to `next.config.js`:\n```js\nconst withMarkdoc = require('@markdoc/next.js');\nmodule.exports = withMarkdoc({ mode: 'static' })({\n  output: 'export',\n  pageExtensions: ['md', 'mdoc', 'js', 'jsx', 'ts', 'tsx']\n});\n```\nThen `npm run build` will output static files to the `out/` directory.\n\n### 5. Verify .gitignore\nEnsure `documentation/.gitignore` contains:\n```\nnode_modules/\n.next/\nout/\n```\n\n### 6. Prepare for Vercel Deployment\nCreate or verify that the project is ready for Vercel:\n- The `documentation/` directory should be self-contained with its own `package.json`\n- `npm run build` must succeed\n- The Vercel project settings should be:\n  - **Root Directory:** `documentation`\n  - **Framework Preset:** Next.js (auto-detected)\n  - **Build Command:** `npm run build` (or auto-detected)\n  - **Output Directory:** `.next` (or `out` if using static export)\n\nNote: Actually connecting the GitHub repo to Vercel and deploying is a manual step that requires Vercel account access. This epic should ensure the project is deployment-ready.\n\n## Acceptance Criteria\n- `npm run dev` starts without errors and all 17 pages render correctly\n- `npm run build` completes with zero errors\n- `npm run start` serves the production build correctly\n- `.gitignore` excludes `node_modules/`, `.next/`, `out/`\n- All pages, images, tables, callouts, columns, sidebar navigation, and pagination work correctly\n- The project is ready to be deployed to Vercel (self-contained `documentation/` directory with valid `package.json` and build scripts)\n","status":"closed","priority":2,"issue_type":"epic","owner":"sharfy.adamantine@gmail.com","created_at":"2026-02-13T13:45:29.358726+13:00","created_by":"Sharfy Adamantine","updated_at":"2026-02-14T13:19:10.831281+13:00","closed_at":"2026-02-14T13:19:10.831287+13:00","dependencies":[{"issue_id":"docs-d4r","depends_on_id":"docs-c34","type":"blocks","created_at":"2026-02-13T13:45:29.360892+13:00","created_by":"Sharfy Adamantine"},{"issue_id":"docs-d4r","depends_on_id":"docs-vbw","type":"blocks","created_at":"2026-02-13T13:45:29.363352+13:00","created_by":"Sharfy Adamantine"},{"issue_id":"docs-d4r","depends_on_id":"docs-qsc","type":"blocks","created_at":"2026-02-13T13:45:29.364147+13:00","created_by":"Sharfy Adamantine"},{"issue_id":"docs-d4r","depends_on_id":"docs-7dv","type":"blocks","created_at":"2026-02-13T13:45:29.364846+13:00","created_by":"Sharfy Adamantine"},{"issue_id":"docs-d4r","depends_on_id":"docs-yne","type":"blocks","created_at":"2026-02-13T13:45:29.365508+13:00","created_by":"Sharfy Adamantine"},{"issue_id":"docs-d4r","depends_on_id":"docs-cij","type":"blocks","created_at":"2026-02-13T13:45:29.366168+13:00","created_by":"Sharfy Adamantine"},{"issue_id":"docs-d4r","depends_on_id":"docs-7b4","type":"blocks","created_at":"2026-02-13T13:45:29.366821+13:00","created_by":"Sharfy Adamantine"}]}
{"id":"docs-dfq","title":"Epic 10: Stripe Design Language Refinements","description":"## Goal\n\nRefine the Hypercerts documentation site to match Stripe's documentation design language — not just CSS tokens but the full design language: layout patterns, content presentation, interaction design, and structural elements.\n\n## Context\n\nAll 9 migration epics are complete. The site builds and exports correctly. The current design has the right tokens (colors, fonts, spacing) but lacks the polish and interaction patterns that make Stripe docs feel premium:\n\n1. No custom scrollbar styling — browser defaults look chunky\n2. No heading anchor links — can't easily copy section links\n3. Content area is centered with `margin: 0 auto` — looks asymmetric with sidebar + TOC\n4. `\u003cstrong\u003e` / `\u003cb\u003e` needs darker color and weight 700\n5. Links use `text-decoration: underline` on hover — Stripe uses bottom-border approach\n6. First H2 has too much top margin after H1\n7. Header is too plain — just 'Hypercerts Protocol' text\n8. No smooth transitions on hover states\n9. Landing page lacks card-style navigation links\n10. No breadcrumb navigation\n\n## Acceptance Criteria\n\n- `npm run build --prefix documentation` exits 0\n- All 11 design refinements implemented\n- No regressions to existing content rendering\n- Site remains fully static-exportable\n\n## Technical Notes\n\n- Project uses Next.js 16 + @markdoc/next.js with `--webpack` flag\n- CSS is in `documentation/styles/globals.css` (654 lines)\n- Components in `documentation/components/`\n- Markdoc nodes in `documentation/markdoc/nodes/` (currently empty)\n- `documentation/pages/_app.js` registers Markdoc components","status":"in_progress","priority":1,"issue_type":"epic","owner":"sharfy.adamantine@gmail.com","created_at":"2026-02-14T14:23:44.58559+13:00","created_by":"Sharfy Adamantine","updated_at":"2026-02-14T14:26:47.208386+13:00"}
{"id":"docs-dfq.1","title":"Custom scrollbar styling for sidebar, TOC, and code blocks","description":"## Files\n- documentation/styles/globals.css (modify)\n\n## What to do\nAdd custom thin scrollbar styling throughout the site, matching Stripe docs pattern:\n\n1. Add a global scrollbar utility section in globals.css after the Reset section (around line 9).\n\n2. **Sidebar scrollbar** (`.sidebar`): \n   - Width: 6px\n   - Track: transparent\n   - Thumb: `rgba(0,0,0,0.15)` with border-radius 3px\n   - Thumb on hover: `rgba(0,0,0,0.25)`\n   - Auto-hide behavior: set thumb to transparent by default, show on `.sidebar:hover` (use `::-webkit-scrollbar-thumb` with transition workaround)\n   - Firefox: `scrollbar-width: thin; scrollbar-color: transparent transparent;` by default, `scrollbar-color: rgba(0,0,0,0.15) transparent;` on hover\n\n3. **TOC scrollbar** (`.toc`):\n   - Same styling as sidebar\n\n4. **Code block scrollbar** (`.layout-content pre`):\n   - Horizontal scrollbar only (already has `overflow-x: auto`)\n   - Height: 6px\n   - Track: transparent  \n   - Thumb: `rgba(0,0,0,0.12)` with border-radius 3px\n   - Always visible when content overflows (no auto-hide needed)\n\n5. Use both `-webkit-scrollbar` (Chrome/Safari/Edge) and `scrollbar-width`/`scrollbar-color` (Firefox) properties.\n\n## CSS to add (insert after line 8, before Design Tokens):\n\n```css\n/* ===== Scrollbar Styling ===== */\n/* Webkit (Chrome, Safari, Edge) */\n.sidebar::-webkit-scrollbar,\n.toc::-webkit-scrollbar {\n  width: 6px;\n}\n\n.sidebar::-webkit-scrollbar-track,\n.toc::-webkit-scrollbar-track {\n  background: transparent;\n}\n\n.sidebar::-webkit-scrollbar-thumb,\n.toc::-webkit-scrollbar-thumb {\n  background: transparent;\n  border-radius: 3px;\n}\n\n.sidebar:hover::-webkit-scrollbar-thumb,\n.toc:hover::-webkit-scrollbar-thumb {\n  background: rgba(0, 0, 0, 0.15);\n}\n\n.sidebar::-webkit-scrollbar-thumb:hover,\n.toc::-webkit-scrollbar-thumb:hover {\n  background: rgba(0, 0, 0, 0.25);\n}\n\n/* Code block horizontal scrollbar */\n.layout-content pre::-webkit-scrollbar {\n  height: 6px;\n}\n\n.layout-content pre::-webkit-scrollbar-track {\n  background: transparent;\n}\n\n.layout-content pre::-webkit-scrollbar-thumb {\n  background: rgba(0, 0, 0, 0.12);\n  border-radius: 3px;\n}\n\n.layout-content pre::-webkit-scrollbar-thumb:hover {\n  background: rgba(0, 0, 0, 0.2);\n}\n\n/* Firefox */\n.sidebar,\n.toc {\n  scrollbar-width: thin;\n  scrollbar-color: transparent transparent;\n}\n\n.sidebar:hover,\n.toc:hover {\n  scrollbar-color: rgba(0, 0, 0, 0.15) transparent;\n}\n\n.layout-content pre {\n  scrollbar-width: thin;\n  scrollbar-color: rgba(0, 0, 0, 0.12) transparent;\n}\n```\n\n## Edge cases\n- Do NOT remove or modify existing `overflow-y: auto` on `.sidebar` or `overflow-x: auto` on `.layout-content pre`\n- Do NOT add scrollbar styles to the main body/html element\n- The Firefox `scrollbar-color` properties on `.sidebar` and `.toc` must be added to the EXISTING rule blocks (merge with existing selectors), OR placed after them so they cascade correctly. Since `.sidebar` already has styles at line 162, add the Firefox properties there OR use the new scrollbar section with higher specificity.\n\n## Test\n```bash\ncd documentation \u0026\u0026 npm run build\n```\nMust exit 0. Verify visually that scrollbar styles are present in the built CSS.\n\n## Dont\n- Do not modify any JavaScript files\n- Do not change any existing CSS properties — only ADD new scrollbar-related properties\n- Do not use JavaScript-based scrollbar libraries","status":"closed","priority":2,"issue_type":"task","owner":"sharfy.adamantine@gmail.com","created_at":"2026-02-14T14:24:20.195548+13:00","created_by":"Sharfy Adamantine","updated_at":"2026-02-14T20:03:50.061126+13:00","closed_at":"2026-02-14T20:03:50.061126+13:00","close_reason":"Added custom scrollbar styling for sidebar, TOC, and code blocks. Build successful.","labels":["scope:trivial"],"dependencies":[{"issue_id":"docs-dfq.1","depends_on_id":"docs-dfq","type":"parent-child","created_at":"2026-02-14T14:24:20.196559+13:00","created_by":"Sharfy Adamantine"}]}
{"id":"docs-dfq.2","title":"Heading anchor links on hover with Markdoc node override","description":"## Files\n- documentation/markdoc/nodes/heading.markdoc.js (create)\n- documentation/components/Heading.js (create)\n- documentation/pages/_app.js (modify)\n- documentation/styles/globals.css (modify)\n\n## What to do\nAdd clickable anchor links (#) that appear on hover next to H2 and H3 headings, matching Stripe docs pattern. This requires a Markdoc heading node override.\n\n### 1. Create `documentation/markdoc/nodes/heading.markdoc.js`\n\nThis file tells @markdoc/next.js to use a custom component for heading nodes:\n\n```js\nimport { nodes } from \"@markdoc/markdoc\";\n\nconst heading = {\n  ...nodes.heading,\n  render: \"Heading\",\n};\n\nexport default heading;\n```\n\n### 2. Create `documentation/components/Heading.js`\n\nThis React component renders headings with auto-generated IDs and hover anchor links:\n\n```jsx\nimport React from \"react\";\n\nfunction generateId(children) {\n  const text = React.Children.toArray(children)\n    .filter((child) =\u003e typeof child === \"string\")\n    .join(\"\");\n  return text\n    .toLowerCase()\n    .replace(/[^a-z0-9]+/g, \"-\")\n    .replace(/(^-|-$)/g, \"\");\n}\n\nexport function Heading({ level = 2, children, id }) {\n  const Tag = `h${level}`;\n  const headingId = id || generateId(children);\n\n  return (\n    \u003cTag id={headingId} className=\"heading-anchor-target\"\u003e\n      {children}\n      {(level === 2 || level === 3) \u0026\u0026 (\n        \u003ca\n          href={`#${headingId}`}\n          className=\"heading-anchor\"\n          aria-label={`Link to this section`}\n          onClick={(e) =\u003e {\n            e.preventDefault();\n            const el = document.getElementById(headingId);\n            if (el) {\n              el.scrollIntoView({ behavior: \"smooth\", block: \"start\" });\n              history.pushState(null, \"\", `#${headingId}`);\n            }\n          }}\n        \u003e\n          #\n        \u003c/a\u003e\n      )}\n    \u003c/Tag\u003e\n  );\n}\n```\n\n### 3. Modify `documentation/pages/_app.js`\n\nImport the Heading component and register it in the components object:\n\nAdd this import at the top:\n```js\nimport { Heading } from \"../components/Heading\";\n```\n\nAdd `Heading` to the components object:\n```js\nconst components = {\n  Callout,\n  Columns,\n  Column,\n  Figure,\n  Heading,\n};\n```\n\n### 4. Add CSS to `documentation/styles/globals.css`\n\nAdd these styles in the Typography section (after the existing heading styles, around line 416):\n\n```css\n/* Heading anchor links */\n.heading-anchor-target {\n  position: relative;\n}\n\n.heading-anchor {\n  position: absolute;\n  left: -1.2em;\n  top: 50%;\n  transform: translateY(-50%);\n  color: var(--color-text-secondary);\n  text-decoration: none;\n  font-weight: 400;\n  opacity: 0;\n  transition: opacity 0.15s ease;\n  font-size: 0.85em;\n}\n\n.heading-anchor:hover {\n  color: var(--color-link);\n  text-decoration: none;\n}\n\n.heading-anchor-target:hover .heading-anchor {\n  opacity: 1;\n}\n```\n\n## Edge cases\n- The `generateId` function must handle children that are React elements (not just strings). Use `React.Children.toArray` and filter for strings.\n- H1 headings should NOT get anchor links (only H2 and H3).\n- H4, H5, H6 should render normally without anchor links.\n- The heading ID generation must match the existing ID generation in `TableOfContents.js` (same algorithm: lowercase, replace non-alphanumeric with hyphens, trim hyphens). The TOC component reads IDs from the DOM, so as long as the Heading component sets `id` on the element, it will work.\n- The `id` prop may be passed by Markdoc if the markdown has `{% heading id=\"custom-id\" %}` — respect it if provided.\n\n## Test\n```bash\ncd documentation \u0026\u0026 npm run build\n```\nMust exit 0. Additionally verify:\n```bash\ngrep -r \"heading-anchor\" documentation/styles/globals.css \u0026\u0026 echo \"CSS OK\"\ngrep -r \"Heading\" documentation/components/Heading.js \u0026\u0026 echo \"Component OK\"\ngrep -r \"heading\" documentation/markdoc/nodes/heading.markdoc.js \u0026\u0026 echo \"Node OK\"\ngrep \"Heading\" documentation/pages/_app.js \u0026\u0026 echo \"Registration OK\"\n```\nAll four greps must produce output.\n\n## Dont\n- Do not modify TableOfContents.js — it reads IDs from the DOM and will continue to work\n- Do not add anchor links to H1 headings\n- Do not use any external libraries\n- Do not change the heading ID generation algorithm (must remain compatible with TOC scroll spy)","status":"closed","priority":1,"issue_type":"task","owner":"sharfy.adamantine@gmail.com","created_at":"2026-02-14T14:24:42.488252+13:00","created_by":"Sharfy Adamantine","updated_at":"2026-02-14T20:03:48.382557+13:00","closed_at":"2026-02-14T20:03:48.382557+13:00","close_reason":"219b041 Add heading anchor links on hover - implemented Markdoc heading node override with auto-generated IDs and hover anchor links for H2/H3","labels":["scope:small"],"dependencies":[{"issue_id":"docs-dfq.2","depends_on_id":"docs-dfq","type":"parent-child","created_at":"2026-02-14T14:24:42.502369+13:00","created_by":"Sharfy Adamantine"}]}
{"id":"docs-dfq.3","title":"CSS typography and link refinements","description":"## Files\n- documentation/styles/globals.css (modify)\n\n## What to do\nRefine typography and link styles to match Stripe docs design language. All changes are CSS-only.\n\n### 1. Strong/bold text styling\nAdd after the existing heading styles (around line 416 area, or wherever heading styles end):\n\n```css\n/* Bold text */\n.layout-content strong,\n.layout-content b {\n  color: var(--color-text-heading);\n  font-weight: 600;\n}\n```\n\nNote: Use `font-weight: 600` (semibold) not 700 — Stripe uses 600 for inline bold to distinguish from heading weight.\n\n### 2. Link underline refinement\nReplace the existing `.layout-content a:hover` rule (currently at line 444-447) to use border-bottom instead of text-decoration:\n\nChange FROM:\n```css\n.layout-content a:hover {\n  color: var(--color-link-hover);\n  text-decoration: underline;\n}\n```\n\nChange TO:\n```css\n.layout-content a {\n  color: var(--color-link);\n  text-decoration: none;\n  border-bottom: 1px solid transparent;\n  transition: border-color 0.15s ease, color 0.15s ease;\n}\n\n.layout-content a:hover {\n  color: var(--color-link-hover);\n  text-decoration: none;\n  border-bottom-color: var(--color-link-hover);\n}\n```\n\nThis replaces the existing `.layout-content a` (line 439-442) and `.layout-content a:hover` (line 444-447) rules entirely.\n\n### 3. First H2 tighter spacing after H1\nAdd a rule that reduces the top margin of the first H2 that follows an H1:\n\n```css\n/* Tighter coupling between H1 and first H2 */\n.layout-content h1 + h2 {\n  margin-top: var(--space-6);\n}\n```\n\nThis overrides the default `margin-top: var(--space-12)` (48px) on H2 to `var(--space-6)` (24px) when it immediately follows an H1.\n\n### 4. Paragraph spacing refinement\nThe current paragraph bottom margin is `var(--space-4)` (16px). This is correct — do NOT change it. But add a rule for the last paragraph in an article to remove bottom margin:\n\n```css\n.layout-content article \u003e p:last-child {\n  margin-bottom: 0;\n}\n```\n\n## Test\n```bash\ncd documentation \u0026\u0026 npm run build\n```\nMust exit 0. Additionally:\n```bash\ngrep \"layout-content strong\" documentation/styles/globals.css \u0026\u0026 echo \"Strong OK\"\ngrep \"border-bottom\" documentation/styles/globals.css \u0026\u0026 echo \"Link underline OK\"\ngrep \"h1 + h2\" documentation/styles/globals.css \u0026\u0026 echo \"H2 spacing OK\"\n```\nAll three greps must produce output.\n\n## Dont\n- Do not change font sizes or line heights on headings\n- Do not modify heading colors\n- Do not change the base link color (--color-link: #0570de)\n- Do not modify any JavaScript files\n- Do not remove the existing `a:hover` rule in the Base section (line 93-96) — only modify the `.layout-content a` rules","status":"closed","priority":2,"issue_type":"task","owner":"sharfy.adamantine@gmail.com","created_at":"2026-02-14T14:24:59.393717+13:00","created_by":"Sharfy Adamantine","updated_at":"2026-02-14T20:02:45.90143+13:00","closed_at":"2026-02-14T20:02:45.90143+13:00","close_reason":"95604df CSS typography and link refinements","labels":["scope:trivial"],"dependencies":[{"issue_id":"docs-dfq.3","depends_on_id":"docs-dfq","type":"parent-child","created_at":"2026-02-14T14:24:59.395087+13:00","created_by":"Sharfy Adamantine"}]}
{"id":"docs-dfq.4","title":"Fix content area layout - left-align instead of center","description":"## Files\n- documentation/styles/globals.css (modify)\n\n## What to do\nThe content area currently uses `margin: 0 auto` which centers it in the available space between sidebar and TOC. This looks asymmetric — the content should be left-aligned in its column with consistent padding, like Stripe docs.\n\n### Change the `.layout-content` rule (currently at line 266-272):\n\nChange FROM:\n```css\n.layout-content {\n  flex: 1;\n  min-width: 0;\n  max-width: var(--content-max-width);\n  margin: 0 auto;\n  padding: var(--space-8);\n}\n```\n\nChange TO:\n```css\n.layout-content {\n  flex: 1;\n  min-width: 0;\n  max-width: var(--content-max-width);\n  padding: var(--space-8) var(--space-10);\n}\n```\n\nKey changes:\n- Remove `margin: 0 auto` (was centering the content)\n- Change padding from `var(--space-8)` (32px all sides) to `var(--space-8) var(--space-10)` (32px top/bottom, 40px left/right)\n- The content will now sit left-aligned in the flex container, with the remaining space naturally pushing toward the TOC\n\n### Also update the mobile responsive rule (currently at line 639-641):\n\nChange FROM:\n```css\n.layout-content {\n  padding: var(--space-6) var(--space-4);\n}\n```\n\nChange TO:\n```css\n.layout-content {\n  padding: var(--space-6) var(--space-4);\n}\n```\n\n(No change needed for mobile — keep as-is.)\n\n## Test\n```bash\ncd documentation \u0026\u0026 npm run build\n```\nMust exit 0. Verify the built CSS does NOT contain `margin: 0 auto` for `.layout-content`.\n\n## Dont\n- Do not change `max-width: var(--content-max-width)` — keep the 720px max\n- Do not change `flex: 1` or `min-width: 0`\n- Do not modify the mobile responsive padding\n- Do not modify any JavaScript files","status":"closed","priority":1,"issue_type":"task","owner":"sharfy.adamantine@gmail.com","created_at":"2026-02-14T14:25:10.679561+13:00","created_by":"Sharfy Adamantine","updated_at":"2026-02-14T20:03:19.531911+13:00","closed_at":"2026-02-14T20:03:19.531911+13:00","close_reason":"7ee8f5d Fix content area layout - left-align instead of center","labels":["scope:trivial"],"dependencies":[{"issue_id":"docs-dfq.4","depends_on_id":"docs-dfq","type":"parent-child","created_at":"2026-02-14T14:25:10.681171+13:00","created_by":"Sharfy Adamantine"}]}
{"id":"docs-dfq.5","title":"Enhanced header with breadcrumbs and visual refinement","description":"## Files\n- documentation/components/Layout.js (modify)\n- documentation/components/Breadcrumbs.js (create)\n- documentation/styles/globals.css (modify)\n\n## What to do\nEnhance the header to be more visually refined like Stripe docs. Add breadcrumb navigation below the header, and improve the header visual treatment.\n\n### 1. Create `documentation/components/Breadcrumbs.js`\n\nA breadcrumb component that shows the current page location based on the navigation tree:\n\n```jsx\nimport Link from \"next/link\";\nimport { useRouter } from \"next/router\";\nimport { navigation } from \"../lib/navigation\";\n\nfunction findBreadcrumbs(nav, targetPath, trail = []) {\n  for (const item of nav) {\n    if (item.section) {\n      const result = findBreadcrumbs(item.children || [], targetPath, [\n        ...trail,\n        { title: item.section },\n      ]);\n      if (result) return result;\n    } else {\n      if (item.path === targetPath) {\n        return [...trail, { title: item.title, path: item.path }];\n      }\n      if (item.children) {\n        const result = findBreadcrumbs(item.children, targetPath, [\n          ...trail,\n          { title: item.title, path: item.path },\n        ]);\n        if (result) return result;\n      }\n    }\n  }\n  return null;\n}\n\nexport function Breadcrumbs() {\n  const router = useRouter();\n  const currentPath = router.asPath.split(\"#\")[0].split(\"?\")[0];\n\n  // Dont show breadcrumbs on home page\n  if (currentPath === \"/\") return null;\n\n  const crumbs = findBreadcrumbs(navigation, currentPath) || [];\n\n  if (crumbs.length \u003c= 1) return null;\n\n  return (\n    \u003cnav className=\"breadcrumbs\" aria-label=\"Breadcrumb\"\u003e\n      \u003col className=\"breadcrumbs-list\"\u003e\n        \u003cli className=\"breadcrumbs-item\"\u003e\n          \u003cLink href=\"/\" className=\"breadcrumbs-link\"\u003e\n            Docs\n          \u003c/Link\u003e\n        \u003c/li\u003e\n        {crumbs.slice(0, -1).map((crumb, i) =\u003e (\n          \u003cli key={i} className=\"breadcrumbs-item\"\u003e\n            \u003cspan className=\"breadcrumbs-separator\"\u003e/\u003c/span\u003e\n            {crumb.path ? (\n              \u003cLink href={crumb.path} className=\"breadcrumbs-link\"\u003e\n                {crumb.title}\n              \u003c/Link\u003e\n            ) : (\n              \u003cspan className=\"breadcrumbs-text\"\u003e{crumb.title}\u003c/span\u003e\n            )}\n          \u003c/li\u003e\n        ))}\n        \u003cli className=\"breadcrumbs-item\"\u003e\n          \u003cspan className=\"breadcrumbs-separator\"\u003e/\u003c/span\u003e\n          \u003cspan className=\"breadcrumbs-current\"\u003e{crumbs[crumbs.length - 1].title}\u003c/span\u003e\n        \u003c/li\u003e\n      \u003c/ol\u003e\n    \u003c/nav\u003e\n  );\n}\n```\n\n### 2. Modify `documentation/components/Layout.js`\n\nAdd the Breadcrumbs component import and render it inside the `\u003cmain\u003e` element, before the `\u003carticle\u003e`:\n\nAdd import at top:\n```js\nimport { Breadcrumbs } from \"./Breadcrumbs\";\n```\n\nInside the JSX, change the `\u003cmain\u003e` section from:\n```jsx\n\u003cmain className=\"layout-content\"\u003e\n  \u003carticle\u003e{children}\u003c/article\u003e\n```\n\nTo:\n```jsx\n\u003cmain className=\"layout-content\"\u003e\n  \u003cBreadcrumbs /\u003e\n  \u003carticle\u003e{children}\u003c/article\u003e\n```\n\n### 3. Add CSS to `documentation/styles/globals.css`\n\nAdd a new section after the Header styles (after line ~153) for breadcrumbs:\n\n```css\n/* ===== Breadcrumbs ===== */\n.breadcrumbs {\n  margin-bottom: var(--space-4);\n}\n\n.breadcrumbs-list {\n  display: flex;\n  align-items: center;\n  flex-wrap: wrap;\n  list-style: none;\n  padding: 0;\n  margin: 0;\n  font-size: 13px;\n  line-height: 1.4;\n}\n\n.breadcrumbs-item {\n  display: flex;\n  align-items: center;\n}\n\n.breadcrumbs-separator {\n  margin: 0 6px;\n  color: var(--color-text-secondary);\n  font-size: 12px;\n}\n\n.breadcrumbs-link {\n  color: var(--color-text-secondary);\n  text-decoration: none;\n  transition: color 0.15s ease;\n}\n\n.breadcrumbs-link:hover {\n  color: var(--color-link);\n  text-decoration: none;\n}\n\n.breadcrumbs-text {\n  color: var(--color-text-secondary);\n}\n\n.breadcrumbs-current {\n  color: var(--color-text-primary);\n  font-weight: 500;\n}\n```\n\nAlso enhance the header visual treatment. Add a subtle backdrop blur to the header. Modify the existing `.layout-header` rule (line 110-117):\n\nChange FROM:\n```css\n.layout-header {\n  position: sticky;\n  top: 0;\n  z-index: 100;\n  height: var(--header-height);\n  background: var(--color-bg);\n  border-bottom: 1px solid var(--color-border);\n}\n```\n\nChange TO:\n```css\n.layout-header {\n  position: sticky;\n  top: 0;\n  z-index: 100;\n  height: var(--header-height);\n  background: rgba(255, 255, 255, 0.95);\n  backdrop-filter: blur(8px);\n  -webkit-backdrop-filter: blur(8px);\n  border-bottom: 1px solid var(--color-border);\n}\n```\n\n## Test\n```bash\ncd documentation \u0026\u0026 npm run build\n```\nMust exit 0. Additionally:\n```bash\ntest -f documentation/components/Breadcrumbs.js \u0026\u0026 echo \"Breadcrumbs component OK\"\ngrep \"Breadcrumbs\" documentation/components/Layout.js \u0026\u0026 echo \"Layout import OK\"\ngrep \"breadcrumbs\" documentation/styles/globals.css \u0026\u0026 echo \"CSS OK\"\ngrep \"backdrop-filter\" documentation/styles/globals.css \u0026\u0026 echo \"Header blur OK\"\n```\nAll four checks must pass.\n\n## Dont\n- Do not modify the header height or padding\n- Do not add a search bar (out of scope for this task)\n- Do not modify navigation.js\n- Do not modify Sidebar.js or TableOfContents.js\n- Do not change the logo text or link","status":"closed","priority":2,"issue_type":"task","owner":"sharfy.adamantine@gmail.com","created_at":"2026-02-14T14:25:33.805204+13:00","created_by":"Sharfy Adamantine","updated_at":"2026-02-14T20:03:55.98582+13:00","closed_at":"2026-02-14T20:03:55.98582+13:00","close_reason":"77ec8dc Enhanced header with breadcrumbs and visual refinement","labels":["scope:small"],"dependencies":[{"issue_id":"docs-dfq.5","depends_on_id":"docs-dfq","type":"parent-child","created_at":"2026-02-14T14:25:33.806485+13:00","created_by":"Sharfy Adamantine"}]}
{"id":"docs-dfq.6","title":"Transition and hover state polish","description":"## Files\n- documentation/styles/globals.css (modify)\n\n## What to do\nAdd smooth transitions and refined hover states throughout the site, matching Stripe docs interaction patterns. All changes are CSS-only.\n\n### 1. Global transition timing\nAdd a CSS custom property for the standard transition in the `:root` design tokens section (around line 69, before the closing `}`):\n\n```css\n  --transition-fast: 150ms ease;\n  --transition-normal: 200ms cubic-bezier(0, 0.09, 0.4, 1);\n```\n\n### 2. Sidebar link transitions\nUpdate the existing `.sidebar-link` rule (line ~214-225). Add/modify the transition property:\n\nChange FROM:\n```css\n  transition: background 0.1s ease;\n```\n\nChange TO:\n```css\n  transition: background var(--transition-fast), color var(--transition-fast);\n```\n\n### 3. Sidebar active indicator\nAdd a left border indicator for the active sidebar link. Modify `.sidebar-link-active` (line ~233-237):\n\nChange FROM:\n```css\n.sidebar-link-active {\n  font-weight: 600;\n  color: var(--color-text-title);\n  background: var(--hover-bg);\n}\n```\n\nChange TO:\n```css\n.sidebar-link-active {\n  font-weight: 600;\n  color: var(--color-link);\n  background: var(--active-bg);\n  border-left: 2px solid var(--color-link);\n  padding-left: calc(var(--space-3) - 2px);\n}\n```\n\nAlso update `a.sidebar-link-active:hover` (line ~239-242):\n\nChange FROM:\n```css\na.sidebar-link-active:hover {\n  background: var(--hover-bg);\n  color: var(--color-text-title);\n}\n```\n\nChange TO:\n```css\na.sidebar-link-active:hover {\n  background: var(--active-bg);\n  color: var(--color-link);\n}\n```\n\n### 4. Pagination hover enhancement\nUpdate the `.pagination-link` transition (line ~354):\n\nChange FROM:\n```css\n  transition: border-color 0.15s ease, box-shadow 0.15s ease;\n```\n\nChange TO:\n```css\n  transition: border-color var(--transition-normal), box-shadow var(--transition-normal), transform var(--transition-normal);\n```\n\nAdd a subtle lift on hover. Update `.pagination-link:hover` (line ~357-361):\n\nChange FROM:\n```css\n.pagination-link:hover {\n  border-color: var(--color-link);\n  box-shadow: 0 1px 4px rgba(5, 112, 222, 0.08);\n  text-decoration: none;\n}\n```\n\nChange TO:\n```css\n.pagination-link:hover {\n  border-color: var(--color-link);\n  box-shadow: 0 2px 8px rgba(5, 112, 222, 0.12);\n  text-decoration: none;\n  transform: translateY(-1px);\n}\n```\n\n### 5. TOC link transitions\nUpdate the `.toc-link` transition (line ~315):\n\nChange FROM:\n```css\n  transition: color 0.15s ease, border-color 0.15s ease;\n```\n\nChange TO:\n```css\n  transition: color var(--transition-fast), border-color var(--transition-fast);\n```\n\n### 6. Callout subtle left border animation\nAdd a transition to callout on hover:\n\n```css\n.callout {\n  transition: box-shadow var(--transition-normal);\n}\n\n.callout:hover {\n  box-shadow: 0 1px 4px rgba(0, 0, 0, 0.04);\n}\n```\n\nAdd these rules after the existing `.callout` rule (line ~533-537). Do NOT modify the existing `.callout` rule — add the transition property to a NEW `.callout` rule block that will merge via cascade, OR add the `transition` property directly into the existing `.callout` block.\n\n## Test\n```bash\ncd documentation \u0026\u0026 npm run build\n```\nMust exit 0. Additionally:\n```bash\ngrep \"transition-fast\" documentation/styles/globals.css \u0026\u0026 echo \"Tokens OK\"\ngrep \"transition-normal\" documentation/styles/globals.css \u0026\u0026 echo \"Tokens OK\"\ngrep \"translateY\" documentation/styles/globals.css \u0026\u0026 echo \"Pagination lift OK\"\ngrep \"border-left.*solid.*color-link\" documentation/styles/globals.css \u0026\u0026 echo \"Active indicator OK\"\n```\nAll four checks must pass.\n\n## Dont\n- Do not add page transition animations (route changes) — that requires JavaScript\n- Do not modify any JavaScript files\n- Do not change colors or font sizes\n- Do not add animation keyframes — only use CSS transitions\n- Do not modify the mobile responsive section","status":"closed","priority":2,"issue_type":"task","owner":"sharfy.adamantine@gmail.com","created_at":"2026-02-14T14:25:54.998064+13:00","created_by":"Sharfy Adamantine","updated_at":"2026-02-14T20:03:35.256599+13:00","closed_at":"2026-02-14T20:03:35.256599+13:00","close_reason":"Implemented all transition and hover state polish: added transition timing variables, updated sidebar/TOC/pagination transitions, added active indicator with border-left, and callout hover effects","labels":["scope:trivial"],"dependencies":[{"issue_id":"docs-dfq.6","depends_on_id":"docs-dfq","type":"parent-child","created_at":"2026-02-14T14:25:54.998941+13:00","created_by":"Sharfy Adamantine"}]}
{"id":"docs-dfq.7","title":"Landing page card-style navigation links","description":"## Files\n- documentation/pages/index.md (modify)\n- documentation/components/CardLink.js (create)\n- documentation/markdoc/tags/card-link.markdoc.js (create)\n- documentation/pages/_app.js (modify)\n- documentation/styles/globals.css (modify)\n\n## What to do\nAdd card-style navigation links to the landing page, similar to Stripe docs landing pages that have categorized link cards with titles, descriptions, and hover effects.\n\n### 1. Create `documentation/components/CardLink.js`\n\nA card component for navigation links:\n\n```jsx\nimport Link from \"next/link\";\n\nexport function CardLink({ title, href, children }) {\n  return (\n    \u003cLink href={href} className=\"card-link\"\u003e\n      \u003cspan className=\"card-link-title\"\u003e{title}\u003c/span\u003e\n      {children \u0026\u0026 \u003cspan className=\"card-link-desc\"\u003e{children}\u003c/span\u003e}\n      \u003cspan className=\"card-link-arrow\"\u003e→\u003c/span\u003e\n    \u003c/Link\u003e\n  );\n}\n```\n\n### 2. Create `documentation/markdoc/tags/card-link.markdoc.js`\n\nRegister the CardLink as a Markdoc tag:\n\n```js\nexport default {\n  render: \"CardLink\",\n  attributes: {\n    title: { type: String, required: true },\n    href: { type: String, required: true },\n  },\n};\n```\n\n### 3. Modify `documentation/pages/_app.js`\n\nAdd import and register:\n\n```js\nimport { CardLink } from \"../components/CardLink\";\n```\n\nAdd to components object:\n```js\nconst components = {\n  Callout,\n  Columns,\n  Column,\n  Figure,\n  Heading,  // (if heading task is done, otherwise omit)\n  CardLink,\n};\n```\n\n**IMPORTANT**: The components object may already contain `Heading` if task docs-dfq.2 was completed first. If `Heading` is already there, keep it. If not, do NOT add it — only add `CardLink`.\n\n### 4. Add CSS to `documentation/styles/globals.css`\n\nAdd a new section after the Figure component styles (around line ~597):\n\n```css\n/* ===== Component: CardLink ===== */\n.card-link {\n  display: block;\n  padding: var(--space-4) var(--space-5);\n  border: 1px solid var(--color-border);\n  border-radius: var(--radius-lg);\n  text-decoration: none;\n  transition: border-color 0.2s ease, box-shadow 0.2s ease, transform 0.2s ease;\n  position: relative;\n  margin-bottom: var(--space-3);\n}\n\n.card-link:hover {\n  border-color: var(--color-link);\n  box-shadow: 0 2px 8px rgba(5, 112, 222, 0.1);\n  text-decoration: none;\n  transform: translateY(-1px);\n}\n\n.card-link-title {\n  display: block;\n  font-size: 15px;\n  font-weight: 600;\n  color: var(--color-link);\n  margin-bottom: var(--space-1);\n}\n\n.card-link-desc {\n  display: block;\n  font-size: 14px;\n  color: var(--color-text-secondary);\n  line-height: 1.5;\n}\n\n.card-link-arrow {\n  position: absolute;\n  right: var(--space-4);\n  top: 50%;\n  transform: translateY(-50%);\n  color: var(--color-link);\n  font-size: 16px;\n  opacity: 0;\n  transition: opacity 0.15s ease, transform 0.15s ease;\n}\n\n.card-link:hover .card-link-arrow {\n  opacity: 1;\n  transform: translateY(-50%) translateX(2px);\n}\n```\n\n### 5. Modify `documentation/pages/index.md`\n\nAdd a \"Quick Start\" section with card links after the existing content. Append to the end of the file:\n\n```markdown\n\n## Quick Start\n\n{% card-link title=\"Why We're Building Hypercerts\" href=\"/getting-started/why-were-building-hypercerts\" %}\nUnderstand the motivation behind the hypercerts protocol\n{% /card-link %}\n\n{% card-link title=\"Introduction to Impact Claims\" href=\"/getting-started/introduction-to-impact-claims\" %}\nLearn about impact claims and how they work\n{% /card-link %}\n\n{% card-link title=\"The Hypercerts Infrastructure\" href=\"/getting-started/the-hypercerts-infrastructure\" %}\nExplore the technical architecture\n{% /card-link %}\n\n{% card-link title=\"Introduction to Lexicons\" href=\"/lexicons/introduction-to-lexicons\" %}\nUnderstand the data schemas that power hypercerts\n{% /card-link %}\n```\n\n## Test\n```bash\ncd documentation \u0026\u0026 npm run build\n```\nMust exit 0. Additionally:\n```bash\ntest -f documentation/components/CardLink.js \u0026\u0026 echo \"Component OK\"\ntest -f documentation/markdoc/tags/card-link.markdoc.js \u0026\u0026 echo \"Tag OK\"\ngrep \"CardLink\" documentation/pages/_app.js \u0026\u0026 echo \"Registration OK\"\ngrep \"card-link\" documentation/styles/globals.css \u0026\u0026 echo \"CSS OK\"\ngrep \"card-link\" documentation/pages/index.md \u0026\u0026 echo \"Content OK\"\n```\nAll five checks must pass.\n\n## Dont\n- Do not modify existing content on the landing page — only append new content\n- Do not remove the existing columns/figures layout\n- Do not use any external icon libraries\n- Do not modify navigation.js\n- Do not add more than 4 card links","status":"closed","priority":2,"issue_type":"task","owner":"sharfy.adamantine@gmail.com","created_at":"2026-02-14T14:26:17.319286+13:00","created_by":"Sharfy Adamantine","updated_at":"2026-02-14T20:07:08.03882+13:00","closed_at":"2026-02-14T20:07:08.03882+13:00","close_reason":"9969a9b Landing page card-style navigation links","labels":["scope:small"],"dependencies":[{"issue_id":"docs-dfq.7","depends_on_id":"docs-dfq","type":"parent-child","created_at":"2026-02-14T14:26:17.320306+13:00","created_by":"Sharfy Adamantine"}]}
{"id":"docs-dfq.8","title":"Integration: verify all refinements build and render correctly","description":"## Files\n- (no files to create/modify — verification only)\n\n## What to do\nAfter all other tasks in Epic 10 are complete, verify the full integration:\n\n1. Run `cd documentation \u0026\u0026 npm run build` — must exit 0 with no errors\n2. Verify all 17 pages are in the static export\n3. Spot-check that no CSS conflicts exist between the various refinements\n4. Verify the landing page renders with card links\n5. Verify breadcrumbs appear on non-home pages\n\n## Test\n```bash\ncd documentation \u0026\u0026 npm run build 2\u003e\u00261 | grep -c \"●\" | xargs test 17 -eq\n```\nMust show exactly 17 SSG pages.\n\n```bash\ncd documentation \u0026\u0026 npm run build\n```\nMust exit 0.\n\n## Dont\n- Do not modify any files\n- This is a verification-only task","status":"open","priority":1,"issue_type":"task","owner":"sharfy.adamantine@gmail.com","created_at":"2026-02-14T14:26:25.677169+13:00","created_by":"Sharfy Adamantine","updated_at":"2026-02-14T14:26:25.677169+13:00","labels":["scope:trivial"],"dependencies":[{"issue_id":"docs-dfq.8","depends_on_id":"docs-dfq","type":"parent-child","created_at":"2026-02-14T14:26:25.678222+13:00","created_by":"Sharfy Adamantine"},{"issue_id":"docs-dfq.8","depends_on_id":"docs-dfq.1","type":"blocks","created_at":"2026-02-14T14:26:31.650675+13:00","created_by":"Sharfy Adamantine"},{"issue_id":"docs-dfq.8","depends_on_id":"docs-dfq.2","type":"blocks","created_at":"2026-02-14T14:26:31.749901+13:00","created_by":"Sharfy Adamantine"},{"issue_id":"docs-dfq.8","depends_on_id":"docs-dfq.3","type":"blocks","created_at":"2026-02-14T14:26:31.849858+13:00","created_by":"Sharfy Adamantine"},{"issue_id":"docs-dfq.8","depends_on_id":"docs-dfq.4","type":"blocks","created_at":"2026-02-14T14:26:31.950473+13:00","created_by":"Sharfy Adamantine"},{"issue_id":"docs-dfq.8","depends_on_id":"docs-dfq.5","type":"blocks","created_at":"2026-02-14T14:26:32.047374+13:00","created_by":"Sharfy Adamantine"},{"issue_id":"docs-dfq.8","depends_on_id":"docs-dfq.6","type":"blocks","created_at":"2026-02-14T14:26:32.141096+13:00","created_by":"Sharfy Adamantine"},{"issue_id":"docs-dfq.8","depends_on_id":"docs-dfq.7","type":"blocks","created_at":"2026-02-14T14:26:32.236529+13:00","created_by":"Sharfy Adamantine"}]}
{"id":"docs-qsc","title":"Epic 3: Content Migration - Convert All 17 Markdown Files","description":"## Summary\nConvert all 17 GitBook Markdown files to Markdoc-compatible format and move them into the Next.js `pages/` directory. This involves replacing GitBook-proprietary syntax with Markdoc tags, cleaning up HTML artifacts, fixing frontmatter, and restructuring file paths for Next.js routing.\n\n## Context\nThis project is a Next.js + Markdoc documentation site in the `documentation/` directory at the repo root (`/Users/sharfy/Code/hypercerts-atproto-documentation/documentation/`).\n\nThe current GitBook content files are at the `documentation/` root level (e.g., `documentation/README.md`, `documentation/getting-started/why-were-building-hypercerts.md`). They need to be moved into `documentation/pages/` for Next.js file-based routing.\n\nBy the time this epic runs:\n- Epic 1 (Scaffold) has created the `pages/`, `components/`, `markdoc/`, etc. directories\n- Epic 2 (Custom Tags) has created Markdoc tags: `{% callout %}`, `{% columns %}`, `{% column %}`, `{% figure %}`\n- A basic `pages/_app.js` and `pages/index.md` (test page) exist\n\n### Key routing rules:\n- `pages/index.md` -\u003e renders at `/`\n- `pages/getting-started/why-were-building-hypercerts.md` -\u003e renders at `/getting-started/why-were-building-hypercerts`\n- `README.md` files must be renamed to `index.md` (Next.js convention for directory index pages)\n- Internal links should NOT include `.md` extensions\n\n## Content Files to Migrate (17 total)\n\n### File mapping (source -\u003e destination):\n```\ndocumentation/README.md                                    -\u003e documentation/pages/index.md\ndocumentation/deep-dive-the-work-scope.md                  -\u003e documentation/pages/deep-dive-the-work-scope.md\ndocumentation/getting-started/why-were-building-hypercerts.md          -\u003e documentation/pages/getting-started/why-were-building-hypercerts.md\ndocumentation/getting-started/introduction-to-impact-claims.md         -\u003e documentation/pages/getting-started/introduction-to-impact-claims.md\ndocumentation/getting-started/the-impact-and-work-space.md             -\u003e documentation/pages/getting-started/the-impact-and-work-space.md\ndocumentation/getting-started/the-hypercerts-infrastructure.md         -\u003e documentation/pages/getting-started/the-hypercerts-infrastructure.md\ndocumentation/getting-started/installing-the-sdk.md                    -\u003e documentation/pages/getting-started/installing-the-sdk.md\ndocumentation/lexicons/introduction-to-lexicons.md                     -\u003e documentation/pages/lexicons/introduction-to-lexicons.md\ndocumentation/lexicons/general-lexicons/README.md                      -\u003e documentation/pages/lexicons/general-lexicons/index.md\ndocumentation/lexicons/general-lexicons/shared-defs.md                 -\u003e documentation/pages/lexicons/general-lexicons/shared-defs.md\ndocumentation/lexicons/general-lexicons/location.md                    -\u003e documentation/pages/lexicons/general-lexicons/location.md\ndocumentation/lexicons/hypercerts-lexicons/README.md                   -\u003e documentation/pages/lexicons/hypercerts-lexicons/index.md\ndocumentation/lexicons/hypercerts-lexicons/activity-claim.md           -\u003e documentation/pages/lexicons/hypercerts-lexicons/activity-claim.md\ndocumentation/lexicons/hypercerts-lexicons/contribution.md             -\u003e documentation/pages/lexicons/hypercerts-lexicons/contribution.md\ndocumentation/lexicons/hypercerts-lexicons/evaluation.md               -\u003e documentation/pages/lexicons/hypercerts-lexicons/evaluation.md\ndocumentation/lexicons/hypercerts-lexicons/measurement.md              -\u003e documentation/pages/lexicons/hypercerts-lexicons/measurement.md\ndocumentation/lexicons/hypercerts-lexicons/attachment.md               -\u003e documentation/pages/lexicons/hypercerts-lexicons/attachment.md\ndocumentation/lexicons/hypercerts-lexicons/rights.md                   -\u003e documentation/pages/lexicons/hypercerts-lexicons/rights.md\ndocumentation/lexicons/hypercerts-lexicons/collection.md               -\u003e documentation/pages/lexicons/hypercerts-lexicons/collection.md\n```\n\n## Global Transformations (apply to ALL files)\n\n1. **Remove all `\u0026#x20;` HTML entities** (trailing space artifacts from GitBook) -- found in 6 files, ~9 instances\n2. **Remove all zero-width space characters** (`\\u200b`) from table cells -- found in activity-claim.md, rights.md\n3. **Remove all GitBook anchor tags from headings**: `\u003ca href=\"#...\" id=\"...\"\u003e\u003c/a\u003e` -- found in why-were-building-hypercerts.md (15 instances), activity-claim.md (3 instances)\n4. **Remove trailing `\u003cbr\u003e` tags** at end of files -- found in 6 files\n5. **Convert GitBook layout frontmatter** to simple `title`/`description` frontmatter. The GitBook frontmatter looks like:\n```yaml\nlayout:\n  width: default\n  title:\n    visible: true\n  ...\nmetaLinks:\n  alternates:\n    - https://app.gitbook.com/s/...\n```\nReplace with:\n```yaml\ntitle: Page Title Here\ndescription: Optional description\n```\n6. **Rename README.md -\u003e index.md** (3 files: root, general-lexicons, hypercerts-lexicons)\n7. **Update all internal links** to use Next.js-compatible paths (remove `.md` extensions, use absolute paths from root)\n8. **Add frontmatter** to every file that lacks it (at minimum: `title`)\n\n## File-Specific Transformations\n\n### README.md -\u003e pages/index.md\n- Replace the entire GitBook layout frontmatter block with: `title: Welcome to the Hypercerts Protocol`\n- Convert `{% columns %}`/`{% column %}`/`{% endcolumn %}`/`{% endcolumns %}` to Markdoc syntax: `{% columns %}`/`{% column %}`/`{% /column %}`/`{% /columns %}`\n- Convert 2 `\u003cfigure\u003e\u003cimg src=\".gitbook/assets/...\"\u003e` tags to `{% figure src=\"/images/...\" /%}`:\n  - `.gitbook/assets/hypercerts_for_projects.png` -\u003e `/images/hypercerts_for_projects.png`\n  - `.gitbook/assets/hypercert erd.png` -\u003e `/images/hypercert-erd.png`\n- Remove or fix broken link `/broken/pages/gNQzZ9R1b3NKrJoQ0Iqa` (read surrounding text to determine intent; if undeterminable, remove the link and keep the text)\n- Remove trailing `\u003cbr\u003e`\n\n### deep-dive-the-work-scope.md -\u003e pages/deep-dive-the-work-scope.md\n- Add frontmatter: `title: \"Deep Dive: The Work Scope\"`\n- Convert `{% hint style=\"info\" %}...{% endhint %}` to `{% callout type=\"info\" %}...{% /callout %}`\n\n### getting-started/why-were-building-hypercerts.md\n- Keep existing `description` frontmatter, add `title: \"Why We're Building Hypercerts\"`\n- Remove all 15 anchor `\u003ca href=\"#...\" id=\"...\"\u003e\u003c/a\u003e` tags from headings\n- Remove trailing `\u003cbr\u003e`\n\n### getting-started/introduction-to-impact-claims.md\n- Replace `icon: bolt` frontmatter with `title: Introduction to Impact Claims`\n- Remove `\u0026#x20;` entities (3 instances)\n- Convert `\u003cfigure\u003e\u003cimg src=\"../.gitbook/assets/hypercert erd.png\"\u003e` to `{% figure src=\"/images/hypercert-erd.png\" alt=\"Hypercert ERD\" /%}`\n\n### getting-started/the-impact-and-work-space.md\n- Add frontmatter: `title: The Impact and Work Space`\n- Remove `\u0026#x20;` entity\n- Fix broken self-referencing anchor link `the-impact-and-work-space.md#the-impact-space` -- the heading `#the-impact-space` does not exist. Check what heading was intended and fix.\n\n### getting-started/the-hypercerts-infrastructure.md\n- Add frontmatter: `title: The Hypercerts Infrastructure`\n- Content is just \"TBD\" -- leave as-is\n\n### getting-started/installing-the-sdk.md\n- Add frontmatter: `title: Installing the SDK`\n- Remove `\u003cbr\u003e`. Content is empty -- leave as-is\n\n### lexicons/introduction-to-lexicons.md\n- Add frontmatter: `title: Introduction to Lexicons`\n- Remove `\u0026#x20;`\n- Fix 2 broken links: `/broken/pages/3UwgsMpD20ErXurhzmTh` and `/broken/pages/FdVczwFhTBj7n5nszh0P` -- read surrounding text to determine intent. If undeterminable, remove the links and keep the text.\n\n### lexicons/general-lexicons/README.md -\u003e pages/lexicons/general-lexicons/index.md\n- Add frontmatter: `title: General Lexicons`\n\n### lexicons/general-lexicons/shared-defs.md\n- Add frontmatter: `title: Shared Definitions`\n- Remove `\u0026#x20;`\n\n### lexicons/general-lexicons/location.md\n- Add frontmatter: `title: Location`\n- Remove `\u0026#x20;` (3 instances)\n- Fix inline HTML in table cell: `\u003cp\u003e\u003ccode\u003eunion\u003c/code\u003e\u003cbr\u003e...\u003c/p\u003e` -\u003e clean Markdown equivalent\n- Fix broken anchor link `location.md#locationtype` -\u003e `#location-type` (the heading is \"### Location Type\" which generates anchor `#location-type`)\n\n### lexicons/hypercerts-lexicons/README.md -\u003e pages/lexicons/hypercerts-lexicons/index.md\n- Add frontmatter: `title: Hypercerts Lexicons`\n\n### lexicons/hypercerts-lexicons/activity-claim.md\n- Add frontmatter: `title: Activity Claim`\n- Remove 3 anchor `\u003ca\u003e` tags from headings\n- Fix malformed table: the table is missing a proper header row. The first data row currently acts as the header. Add a real header row with columns: Property, Type, Required, Description, Comments\n- Remove zero-width space characters (`\\u200b`) from table cells\n- Replace broken GitBook editor URL `https://app.gitbook.com/o/uxU8o4s6mrp88yBisLn5/s/8dkOAon1uQbyqL8RomaJ/hypercert-claim-lexicons/the-impact-and-work-space` with relative link `/getting-started/the-impact-and-work-space`\n- Remove trailing `\u003cbr\u003e`\n\n### lexicons/hypercerts-lexicons/contribution.md\n- Add frontmatter: `title: Contribution`\n- Remove trailing `\u003cbr\u003e`\n\n### lexicons/hypercerts-lexicons/evaluation.md\n- Add frontmatter: `title: Evaluation`\n- Remove trailing `\u003cbr\u003e`\n\n### lexicons/hypercerts-lexicons/measurement.md\n- Add frontmatter: `title: Measurement`\n- Remove `\u0026#x20;`\n\n### lexicons/hypercerts-lexicons/attachment.md\n- Add frontmatter: `title: Evidence`\n- No special syntax changes needed\n\n### lexicons/hypercerts-lexicons/rights.md\n- Add frontmatter: `title: Rights`\n- Fix malformed table: add proper header row (same issue as activity-claim.md)\n- Remove zero-width space characters from table cells\n\n### lexicons/hypercerts-lexicons/collection.md\n- Add frontmatter: `title: Collection`\n- No special syntax changes needed\n\n## Acceptance Criteria\n- All 17 files are in `documentation/pages/` directory with correct paths\n- README.md files renamed to index.md (3 files)\n- No GitBook-specific syntax remains (`{% hint %}`, `{% endcolumns %}`, `{% endcolumn %}`, `{% endhint %}`, etc.)\n- No `\u0026#x20;` entities, no zero-width spaces, no orphan `\u003ca\u003e` anchor tags, no trailing `\u003cbr\u003e`\n- All files have proper YAML frontmatter with at minimum a `title` field\n- All broken links either resolved to correct targets or removed with text preserved\n- Malformed tables in activity-claim.md and rights.md have proper header rows\n- All image paths updated from `.gitbook/assets/` to `/images/`\n- All internal links use paths without `.md` extensions\n- All files render correctly via `npm run dev`\n","status":"closed","priority":0,"issue_type":"epic","owner":"sharfy.adamantine@gmail.com","created_at":"2026-02-13T13:42:41.246087+13:00","created_by":"Sharfy Adamantine","updated_at":"2026-02-14T13:13:55.289826+13:00","closed_at":"2026-02-14T13:13:55.289831+13:00","dependencies":[{"issue_id":"docs-qsc","depends_on_id":"docs-c34","type":"blocks","created_at":"2026-02-13T13:42:41.247806+13:00","created_by":"Sharfy Adamantine"},{"issue_id":"docs-qsc","depends_on_id":"docs-vbw","type":"blocks","created_at":"2026-02-13T13:42:41.24883+13:00","created_by":"Sharfy Adamantine"}]}
{"id":"docs-r1z","title":"Epic 9: Cleanup and Verification","description":"## Summary\nFinal cleanup pass to remove all GitBook artifacts, verify link integrity, perform visual QA against the Stripe-inspired design language, and ensure the project is clean and production-ready.\n\n## Context\nThis project is a Next.js + Markdoc documentation site in the `documentation/` directory inside the repository at `/Users/sharfy/Code/hypercerts-atproto-documentation/documentation/`.\n\nBy the time this epic runs, Epics 1-8 have completed:\n- Next.js + Markdoc project scaffolded (Epic 1)\n- Custom Markdoc tags created: callout, columns, column, figure (Epic 2)\n- All 17 content files migrated to `pages/` with cleaned syntax (Epic 3)\n- Three-column layout with sidebar, content, and right TOC built (Epic 4)\n- Stripe-inspired CSS styling applied (Epic 5)\n- Images moved to `public/images/` and `.gitbook/` deleted (Epic 6)\n- All broken links fixed (Epic 7)\n- Build verified and deployment configured (Epic 8)\n\nThis epic is the final quality gate before the migration is considered complete.\n\n## Tasks\n\n### 1. Remove GitBook Artifacts\n\nDelete all files and directories that are GitBook-specific and no longer needed:\n\n```bash\n# Verify .gitbook/ is already deleted (should be gone from Epic 6)\nls -la documentation/.gitbook 2\u003e\u00261  # Should say \"No such file or directory\"\n\n# Delete SUMMARY.md (replaced by programmatic navigation in Epic 4)\nrm -f documentation/SUMMARY.md\n\n# Delete the original GitBook content files that were copied to pages/\n# These are the OLD files at the documentation/ root level (NOT the ones in pages/)\nrm -f documentation/README.md\nrm -f documentation/deep-dive-the-work-scope.md\nrm -rf documentation/getting-started/\nrm -rf documentation/lexicons/\n```\n\n**Important:** Only delete the old root-level files. Do NOT delete anything inside `documentation/pages/`, `documentation/components/`, `documentation/markdoc/`, etc.\n\nAlso check for and remove any remaining GitBook-specific frontmatter in content files. GitBook frontmatter looks like:\n```yaml\nlayout:\n  width: default\n  title:\n    visible: true\nmetaLinks:\n  alternates:\n    - https://app.gitbook.com/s/...\n```\nIf any of this remains in any file under `pages/`, strip it and leave only `title` and `description` fields.\n\n### 2. Run Artifact Grep Checks\n\nSearch all content files for leftover GitBook artifacts. Every one of these commands should return ZERO results:\n\n```bash\n# GitBook broken page links\ngrep -r '/broken/pages/' documentation/pages/\n\n# GitBook editor URLs\ngrep -r 'app.gitbook.com' documentation/pages/\n\n# GitBook asset paths\ngrep -r '.gitbook/' documentation/pages/\ngrep -r '.gitbook/' documentation/components/\n\n# HTML entity artifacts\ngrep -r '\u0026#x20;' documentation/pages/\n\n# Zero-width spaces (use hex search)\ngrep -rP '\\x{200b}' documentation/pages/ 2\u003e/dev/null || grep -r $'\\u200b' documentation/pages/\n\n# GitBook proprietary tag syntax (should all be converted to Markdoc)\ngrep -r '{% hint' documentation/pages/\ngrep -r '{% endhint' documentation/pages/\ngrep -r '{% endcolumn' documentation/pages/\ngrep -r '{% endcolumns' documentation/pages/\n\n# Orphan HTML tags\ngrep -r '\u003cbr\u003e$' documentation/pages/\ngrep -r '\u003ca href=\"#' documentation/pages/\n```\n\nFix any remaining issues found.\n\n### 3. Verify All Internal Links\n\nStart the dev server and manually navigate to every page via the sidebar:\n\n```bash\ncd documentation \u0026\u0026 npm run dev\n```\n\nPages to check (17 total):\n1. `/` (Welcome / landing page)\n2. `/getting-started/why-were-building-hypercerts`\n3. `/getting-started/introduction-to-impact-claims`\n4. `/getting-started/the-impact-and-work-space`\n5. `/getting-started/the-hypercerts-infrastructure`\n6. `/getting-started/installing-the-sdk`\n7. `/lexicons/introduction-to-lexicons`\n8. `/lexicons/general-lexicons`\n9. `/lexicons/general-lexicons/shared-defs`\n10. `/lexicons/general-lexicons/location`\n11. `/lexicons/hypercerts-lexicons`\n12. `/lexicons/hypercerts-lexicons/activity-claim`\n13. `/lexicons/hypercerts-lexicons/contribution`\n14. `/lexicons/hypercerts-lexicons/evaluation`\n15. `/lexicons/hypercerts-lexicons/measurement`\n16. `/lexicons/hypercerts-lexicons/attachment`\n17. `/lexicons/hypercerts-lexicons/rights`\n18. `/lexicons/hypercerts-lexicons/collection`\n19. `/deep-dive-the-work-scope`\n\nFor each page verify:\n- Page loads without errors (check browser console)\n- No 404s for any internal links on the page\n- Anchor links (e.g., `#location-type`) scroll to the correct heading\n\n### 4. Visual QA Against Stripe Design Language\n\nFor each page, verify the design matches the Stripe-inspired patterns:\n\n**Layout:**\n- [ ] Three-column layout on desktop: left sidebar (~240px), content (~720px max), right TOC (~200px)\n- [ ] Sidebar has subtle 1px right border (#ebeef1), not a heavy shadow\n- [ ] Content area is well-centered with comfortable padding\n- [ ] Header is minimal with site title and 1px bottom border\n\n**Typography:**\n- [ ] Body text is 16px, dark gray (#414552), NOT pure black\n- [ ] Headings use proper hierarchy (H1 largest, H2 with large top margin creating section breaks)\n- [ ] System font stack is used (no custom font loading delays)\n- [ ] Text is anti-aliased (`-webkit-font-smoothing: antialiased`)\n- [ ] Line height is comfortable (~1.65 for body)\n\n**Colors:**\n- [ ] Page background is pure white\n- [ ] Links are blue (#0570de), darken on hover\n- [ ] The page is overwhelmingly neutral/grayscale -- color appears only for links, callouts, and interactive elements\n- [ ] No decorative elements, no gradients, no heavy shadows\n\n**Components:**\n- [ ] Tables are clean: no outer borders, header has bottom border only, no zebra striping\n- [ ] Code blocks have light gray background (#f6f8fa), rounded corners, monospace font\n- [ ] Inline code has subtle gray background pill\n- [ ] Callout boxes (on deep-dive page) have colored left border and tinted background\n- [ ] Column layouts (on landing page) display side-by-side on desktop, stack on mobile\n- [ ] Images render correctly with proper sizing\n\n**Navigation:**\n- [ ] Sidebar section headers are small, semibold, secondary gray\n- [ ] Active page is highlighted in sidebar (bold text + subtle background)\n- [ ] Right TOC shows H2 headings and highlights current section on scroll\n- [ ] Prev/next pagination works at bottom of content area\n- [ ] On mobile (\u003c 768px): sidebar collapses, content goes full width\n\n### 5. Verify Heading Anchor IDs\n\nMarkdoc auto-generates heading IDs from heading text. Verify that the generation is consistent:\n- \"### Location Type\" should generate `#location-type` (lowercase, hyphenated)\n- Any in-page anchor links should match the generated IDs\n- Click each anchor link on pages that have them to confirm they work\n\n### 6. Final File Inventory\n\nVerify the project structure is clean:\n```\ndocumentation/\n├── components/\n│   ├── Callout.js\n│   ├── Column.js\n│   ├── Columns.js\n│   ├── Figure.js\n│   ├── Layout.js\n│   ├── Sidebar.js\n│   └── TableOfContents.js\n├── lib/\n│   └── navigation.js\n├── markdoc/\n│   ├── tags/\n│   │   ├── callout.markdoc.js\n│   │   ├── column.markdoc.js\n│   │   ├── columns.markdoc.js\n│   │   ├── figure.markdoc.js\n│   │   └── index.js\n│   └── nodes/          (may be empty or have heading overrides)\n├── pages/\n│   ├── _app.js\n│   ├── index.md\n│   ├── deep-dive-the-work-scope.md\n│   ├── getting-started/\n│   │   ├── why-were-building-hypercerts.md\n│   │   ├── introduction-to-impact-claims.md\n│   │   ├── the-impact-and-work-space.md\n│   │   ├── the-hypercerts-infrastructure.md\n│   │   └── installing-the-sdk.md\n│   └── lexicons/\n│       ├── introduction-to-lexicons.md\n│       ├── general-lexicons/\n│       │   ├── index.md\n│       │   ├── shared-defs.md\n│       │   └── location.md\n│       └── hypercerts-lexicons/\n│           ├── index.md\n│           ├── activity-claim.md\n│           ├── contribution.md\n│           ├── evaluation.md\n│           ├── measurement.md\n│           ├── attachment.md\n│           ├── rights.md\n│           └── collection.md\n├── public/\n│   └── images/\n│       ├── hypercerts_for_projects.png\n│       └── hypercert-erd.png\n├── styles/\n│   └── globals.css\n├── next.config.js\n├── package.json\n├── package-lock.json\n└── .gitignore\n```\n\nConfirm:\n- No `.gitbook/` directory\n- No `SUMMARY.md`\n- No root-level `.md` content files (only inside `pages/`)\n- No orphaned files outside the standard Next.js structure\n\n### 7. Final Build Check\n```bash\ncd documentation\nnpm run build\n```\nMust succeed with zero errors after all cleanup.\n\n## Acceptance Criteria\n- Zero grep hits for `/broken/pages/`, `app.gitbook.com`, `.gitbook/`, `\u0026#x20;`, zero-width spaces, `{% hint`, `{% endhint`, `{% endcolumn`, `{% endcolumns` in content files\n- `SUMMARY.md` is deleted\n- `.gitbook/` directory is deleted\n- Old root-level content files (README.md, getting-started/, lexicons/, deep-dive-the-work-scope.md) are deleted\n- All 17+ pages render correctly in the browser with no console errors\n- All internal links resolve correctly (no 404s)\n- All heading anchor links work\n- The visual design matches the Stripe-inspired patterns (white bg, gray text, blue links, clean tables, colored callouts, three-column layout)\n- The project directory structure is clean with no orphaned files\n- `npm run build` succeeds with zero errors\n","status":"closed","priority":2,"issue_type":"epic","owner":"sharfy.adamantine@gmail.com","created_at":"2026-02-13T13:46:01.998664+13:00","created_by":"Sharfy Adamantine","updated_at":"2026-02-14T13:19:59.577445+13:00","closed_at":"2026-02-14T13:19:59.577453+13:00","dependencies":[{"issue_id":"docs-r1z","depends_on_id":"docs-c34","type":"blocks","created_at":"2026-02-13T13:46:02.000863+13:00","created_by":"Sharfy Adamantine"},{"issue_id":"docs-r1z","depends_on_id":"docs-vbw","type":"blocks","created_at":"2026-02-13T13:46:02.002015+13:00","created_by":"Sharfy Adamantine"},{"issue_id":"docs-r1z","depends_on_id":"docs-qsc","type":"blocks","created_at":"2026-02-13T13:46:02.002729+13:00","created_by":"Sharfy Adamantine"},{"issue_id":"docs-r1z","depends_on_id":"docs-7dv","type":"blocks","created_at":"2026-02-13T13:46:02.003372+13:00","created_by":"Sharfy Adamantine"},{"issue_id":"docs-r1z","depends_on_id":"docs-yne","type":"blocks","created_at":"2026-02-13T13:46:02.004004+13:00","created_by":"Sharfy Adamantine"},{"issue_id":"docs-r1z","depends_on_id":"docs-cij","type":"blocks","created_at":"2026-02-13T13:46:02.004627+13:00","created_by":"Sharfy Adamantine"},{"issue_id":"docs-r1z","depends_on_id":"docs-7b4","type":"blocks","created_at":"2026-02-13T13:46:02.00526+13:00","created_by":"Sharfy Adamantine"},{"issue_id":"docs-r1z","depends_on_id":"docs-d4r","type":"blocks","created_at":"2026-02-13T13:46:02.005893+13:00","created_by":"Sharfy Adamantine"}]}
{"id":"docs-vbw","title":"Epic 2: Build Custom Markdoc Tags and React Components","description":"## Summary\nCreate custom Markdoc tag definitions and corresponding React components to replace all GitBook-proprietary syntax used in the documentation. These tags will be used when converting content files in later epics.\n\n## Context\nThis project is a Next.js + Markdoc documentation site in the `documentation/` directory. The previous documentation was built with GitBook, which uses proprietary template tags. We need Markdoc equivalents.\n\nThe project uses `@markdoc/next.js` which automatically discovers tag definitions in `markdoc/tags/` and makes them available in `.md` files.\n\n### GitBook syntax that needs Markdoc replacements:\n\n1. **Columns layout** -- Used in `README.md` (2 column groups):\n```\n{% columns %}\n{% column %}\nContent here\n{% endcolumn %}\n{% column %}\nMore content\n{% endcolumn %}\n{% endcolumns %}\n```\n\n2. **Hint/callout boxes** -- Used in `deep-dive-the-work-scope.md` (1 instance):\n```\n{% hint style=\"info\" %}\nThis is an informational callout.\n{% endhint %}\n```\n\n3. **Figure/image with caption** -- Used in `README.md` (2 instances) and `introduction-to-impact-claims.md` (1 instance):\n```html\n\u003cfigure\u003e\u003cimg src=\".gitbook/assets/image.png\" alt=\"\"\u003e\u003cfigcaption\u003e\u003c/figcaption\u003e\u003c/figure\u003e\n```\n\n### How Markdoc tags work with @markdoc/next.js:\n\n1. Tag definitions go in `markdoc/tags/*.markdoc.js` -- these define the tag name, allowed attributes, and which React component to render\n2. React components go in `components/` -- these render the actual HTML\n3. `@markdoc/next.js` auto-discovers tag files in `markdoc/tags/` and wires them up\n4. Components are registered in `pages/_app.js` via a components mapping passed to the renderer\n\n## What You Need to Create\n\n### 1. Callout Tag\n\n**Tag definition** -- `markdoc/tags/callout.markdoc.js`:\n```js\nexport const callout = {\n  render: 'Callout',\n  children: ['paragraph', 'tag', 'list'],\n  attributes: {\n    type: {\n      type: String,\n      default: 'info',\n      matches: ['info', 'warning', 'danger', 'success'],\n      errorLevel: 'critical'\n    },\n    title: {\n      type: String\n    }\n  }\n};\n```\n\n**React component** -- `components/Callout.js`:\n\nVisual design (Stripe-inspired):\n- Container with a 4px left border in accent color\n- Light tinted background matching the type\n- Border-radius: 6px on the right side (or all corners)\n- Padding: 16px\n- Body text in regular weight, dark gray\n- If title provided, render it bold above the body\n\nColor mapping by type:\n- `info`: blue left border (#0570de), very light blue background (#f0f7ff)\n- `warning`: orange left border (#c84801), very light orange background (#fef9f0)\n- `danger`: red left border (#df1b41), very light red background (#fef0f4)\n- `success`: green left border (#228403), very light green background (#f0fef0)\n\nThe component should accept `type`, `title`, and `children` props.\n\n**Markdoc usage** (what content authors will write):\n```\n{% callout type=\"info\" %}\nThis is an informational callout.\n{% /callout %}\n```\n\n### 2. Columns / Column Tags\n\n**Tag definitions** -- `markdoc/tags/columns.markdoc.js`:\n```js\nexport const columns = {\n  render: 'Columns',\n  children: ['tag'],\n  attributes: {\n    gap: {\n      type: String,\n      default: '24px'\n    }\n  }\n};\n```\n\n`markdoc/tags/column.markdoc.js`:\n```js\nexport const column = {\n  render: 'Column',\n  children: ['paragraph', 'tag', 'list', 'heading', 'image', 'fence'],\n};\n```\n\n**React components**:\n\n`components/Columns.js`:\n- CSS flexbox container: `display: flex; gap: 24px;`\n- On mobile (\u003c 768px): `flex-direction: column` (stack vertically)\n- On desktop: `flex-direction: row` (side by side)\n\n`components/Column.js`:\n- `flex: 1` (equal width columns)\n- Renders children directly\n\n**Markdoc usage**:\n```\n{% columns %}\n{% column %}\nLeft content\n{% /column %}\n{% column %}\nRight content\n{% /column %}\n{% /columns %}\n```\n\n### 3. Figure Tag\n\n**Tag definition** -- `markdoc/tags/figure.markdoc.js`:\n```js\nexport const figure = {\n  render: 'Figure',\n  selfClosing: true,\n  attributes: {\n    src: { type: String, required: true },\n    alt: { type: String, default: '' },\n    caption: { type: String }\n  }\n};\n```\n\n**React component** -- `components/Figure.js`:\n\nVisual design:\n- Centered container (`text-align: center; margin: 24px 0`)\n- Image with `max-width: 100%; height: auto; border-radius: 6px`\n- Caption (if provided) rendered below in small text (13px), secondary gray color (#687385), margin-top: 8px\n\n**Markdoc usage**:\n```\n{% figure src=\"/images/hypercert-erd.png\" alt=\"Hypercert ERD\" caption=\"Entity relationship diagram\" /%}\n```\n\n### 4. Export all tags -- `markdoc/tags/index.js`:\n```js\nexport { callout } from './callout.markdoc';\nexport { columns } from './columns.markdoc';\nexport { column } from './column.markdoc';\nexport { figure } from './figure.markdoc';\n```\n\n### 5. Register components in `pages/_app.js`:\nUpdate the existing `_app.js` to pass components:\n```jsx\nimport '../styles/globals.css';\nimport { Callout } from '../components/Callout';\nimport { Columns } from '../components/Columns';\nimport { Column } from '../components/Column';\nimport { Figure } from '../components/Figure';\n\nconst components = {\n  Callout,\n  Columns,\n  Column,\n  Figure,\n};\n\nexport default function App({ Component, pageProps }) {\n  return \u003cComponent {...pageProps} components={components} /\u003e;\n}\n```\n\nNote: With `@markdoc/next.js`, components can also be passed via the Markdoc config. Check the @markdoc/next.js docs if the above pattern doesn't wire up correctly -- the alternative is to use a `markdoc/config.js` file.\n\n### 6. Verify\nCreate a test page `pages/test-tags.md` with all three tags to verify they render:\n```markdown\n---\ntitle: Tag Test\n---\n\n# Tag Test\n\n{% callout type=\"info\" %}\nThis is an info callout.\n{% /callout %}\n\n{% callout type=\"warning\" title=\"Warning\" %}\nThis is a warning.\n{% /callout %}\n\n{% columns %}\n{% column %}\n**Left column** with some content.\n{% /column %}\n{% column %}\n**Right column** with some content.\n{% /column %}\n{% /columns %}\n\n{% figure src=\"/images/hypercert-erd.png\" alt=\"Test image\" caption=\"A test caption\" /%}\n```\n\nRun `npm run dev` and verify all tags render correctly. Delete the test page after verification.\n\n## Acceptance Criteria\n- `markdoc/tags/callout.markdoc.js` exists with type attribute (info, warning, danger, success)\n- `components/Callout.js` renders a styled callout box with 4px colored left border and tinted background\n- `markdoc/tags/columns.markdoc.js` and `markdoc/tags/column.markdoc.js` exist\n- `components/Columns.js` renders a CSS flexbox multi-column layout that stacks on mobile\n- `components/Column.js` renders individual column content with flex: 1\n- `markdoc/tags/figure.markdoc.js` exists as a self-closing tag with src, alt, caption attributes\n- `components/Figure.js` renders a centered image with optional gray caption text\n- `markdoc/tags/index.js` exports all tags\n- Components are registered in `pages/_app.js` so Markdoc can render them\n- All tags render correctly when used in .md files via `npm run dev`\n","status":"closed","priority":1,"issue_type":"epic","owner":"sharfy.adamantine@gmail.com","created_at":"2026-02-13T13:42:05.192802+13:00","created_by":"Sharfy Adamantine","updated_at":"2026-02-14T13:04:51.759083+13:00","closed_at":"2026-02-14T13:04:51.759115+13:00","dependencies":[{"issue_id":"docs-vbw","depends_on_id":"docs-c34","type":"blocks","created_at":"2026-02-13T13:42:05.194443+13:00","created_by":"Sharfy Adamantine"}]}
{"id":"docs-yne","title":"Epic 5: Styling and Visual Design","description":"## Summary\nCreate the complete CSS styling for the documentation site following a design language inspired by Stripe's documentation (docs.stripe.com). The goal is a clean, professional, content-focused documentation site that prioritizes readability and quiet confidence.\n\n## Context\nThis project is a Next.js + Markdoc documentation site in the `documentation/` directory. By the time this epic runs:\n- Epic 1 has scaffolded the project with a minimal `styles/globals.css`\n- Epic 2 has created React components: Callout, Columns, Column, Figure\n- Epic 4 has created Layout, Sidebar, TableOfContents components\n\nAll these components need polished CSS. The styles go in `styles/globals.css` (or can be split into CSS modules if preferred).\n\n## Design Principles\n\nThe Stripe documentation design language follows these core principles:\n1. **Content is the interface** -- every visual decision makes content more scannable, never decorates\n2. **Mostly monochrome, with surgical color** -- the page is 95% grayscale; color appears only for links, callout indicators, and status badges\n3. **Generous but purposeful whitespace** -- everything breathes, nothing floats\n4. **Border, not shadow, for structure** -- 1px light gray borders define regions, not heavy shadows\n5. **Developer-first** -- code blocks are first-class citizens, typography is optimized for technical content\n\n## Typography\n\n### Font stacks\n```css\n--font-sans: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol';\n--font-mono: 'Source Code Pro', Menlo, Monaco, Consolas, monospace;\n```\nUse the system font stack. It loads instantly, feels native on every OS, and is what Stripe uses.\n\n### Font weights\n- Regular: 400 (body text, descriptions)\n- Semibold: 600 (section headers, emphasis, sidebar labels)\n- Bold: 700 (page titles, H1)\n\n### Type scale\n| Element | Size | Weight | Color | Line Height |\n|---------|------|--------|-------|-------------|\n| H1 | 32px | 700 | #21252c (near-black) | 1.25 |\n| H2 | 24px | 700 | #353a44 (dark charcoal) | 1.3 |\n| H3 | 20px | 600 | #353a44 | 1.4 |\n| H4 | 16px | 600 | #353a44 | 1.5 |\n| Body | 16px | 400 | #414552 (dark gray) | 1.65 |\n| Small/Caption | 13px | 400 | #687385 (medium gray) | 1.5 |\n| Code (inline) | 14px | 400 | #414552 | inherit |\n| Code (block) | 14px | 400 | #414552 | 1.55 |\n\n### Anti-aliasing\n```css\nbody {\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n}\n```\n\n## Color Palette\n\n### Neutrals (the workhorse -- 95% of the page)\n| Token | Value | Usage |\n|-------|-------|-------|\n| --color-bg | #ffffff | Page background, content area |\n| --color-bg-subtle | #f6f8fa | Code block backgrounds, sidebar hover, cards |\n| --color-border | #ebeef1 | Section dividers, sidebar border, card borders |\n| --color-border-strong | #d8dee4 | Table header bottom border, input borders |\n| --color-text-secondary | #687385 | Descriptions, metadata, TOC items, captions |\n| --color-text-primary | #414552 | Body text |\n| --color-text-heading | #353a44 | Headings (H2-H4) |\n| --color-text-title | #21252c | H1 page titles |\n\n### Accent colors (used sparingly -- only for interactive elements and semantic indicators)\n| Token | Value | Usage |\n|-------|-------|-------|\n| --color-link | #0570de | Hyperlinks, interactive text |\n| --color-link-hover | #0055bc | Link hover state (slightly darker) |\n| --color-info | #0570de | Info callout border |\n| --color-info-bg | #f0f7ff | Info callout background |\n| --color-warning | #c84801 | Warning callout border |\n| --color-warning-bg | #fef9f0 | Warning callout background |\n| --color-danger | #df1b41 | Danger callout border |\n| --color-danger-bg | #fef0f4 | Danger callout background |\n| --color-success | #228403 | Success callout border |\n| --color-success-bg | #f0fef0 | Success callout background |\n\n### Focus ring\n```css\n--focus-ring: 0 0 0 4px rgba(5, 112, 222, 0.36);\n```\n\n## Spacing System\n\nUse an 8px base grid. All spacing should be multiples of 8 (with 4px for tight spaces):\n```css\n--space-1: 4px;\n--space-2: 8px;\n--space-3: 12px;\n--space-4: 16px;\n--space-5: 20px;\n--space-6: 24px;\n--space-8: 32px;\n--space-10: 40px;\n--space-12: 48px;\n--space-16: 64px;\n```\n\n### Application:\n- Between paragraphs: 16px\n- Between heading and its first paragraph: 8-12px (tight coupling)\n- Before a new H2 section: 48px (creates visible section breaks)\n- Sidebar item vertical spacing: 4-6px between items, 20-24px between section groups\n- Content area horizontal padding: 32px on each side\n- Content area top padding: 32px below header\n\n## Component Styles\n\n### Layout\n```\nHeader: height 56px, white background, bottom border 1px solid #ebeef1\nSidebar: width 240px, fixed/sticky, right border 1px solid #ebeef1, padding 16px\nContent: max-width 720px, centered, padding 32px\nRight TOC: width 200px, sticky top, padding-left 24px\n```\n\n### Sidebar\n- Section headers: 12px, font-weight 600, color #687385, text-transform uppercase, letter-spacing 0.05em, margin-bottom 8px\n- Nav items: 14px, color #414552, padding 6px 12px, border-radius 6px\n- Active nav item: font-weight 600, background-color #f6f8fa, color #21252c\n- Hover nav item: background-color #f6f8fa\n- Nested items: padding-left +16px\n\n### Table of Contents (right side)\n- Title \"On this page\": 12px, font-weight 600, color #687385, uppercase\n- Items: 13px, color #687385, padding 4px 0\n- Active item: color #0570de (link blue)\n- Left border indicator: 2px solid #0570de on active item (optional)\n\n### Callout boxes (from Epic 2 components)\n```css\n.callout {\n  border-left: 4px solid var(--callout-color);\n  background: var(--callout-bg);\n  border-radius: 0 6px 6px 0;\n  padding: 16px;\n  margin: 16px 0;\n}\n.callout-title {\n  font-weight: 600;\n  margin-bottom: 4px;\n}\n```\n\n### Columns layout (from Epic 2 components)\n```css\n.columns {\n  display: flex;\n  gap: 24px;\n  margin: 16px 0;\n}\n.column {\n  flex: 1;\n  min-width: 0;\n}\n@media (max-width: 768px) {\n  .columns { flex-direction: column; }\n}\n```\n\n### Figure (from Epic 2 components)\n```css\n.figure {\n  text-align: center;\n  margin: 24px 0;\n}\n.figure img {\n  max-width: 100%;\n  height: auto;\n  border-radius: 6px;\n}\n.figure-caption {\n  font-size: 13px;\n  color: #687385;\n  margin-top: 8px;\n}\n```\n\n### Tables\nStripe uses clean, borderless tables with only a header bottom border:\n```css\ntable {\n  width: 100%;\n  border-collapse: collapse;\n  margin: 16px 0;\n  font-size: 14px;\n}\nth {\n  text-align: left;\n  font-weight: 600;\n  color: #353a44;\n  padding: 8px 12px;\n  border-bottom: 1px solid #d8dee4;\n}\ntd {\n  padding: 8px 12px;\n  color: #414552;\n  border-bottom: 1px solid #ebeef1;\n}\ntr:last-child td {\n  border-bottom: none;\n}\n```\nNo zebra striping. No outer borders. Clean and minimal.\n\n### Code blocks\n```css\npre {\n  background: #f6f8fa;\n  border-radius: 6px;\n  padding: 16px;\n  overflow-x: auto;\n  font-family: var(--font-mono);\n  font-size: 14px;\n  line-height: 1.55;\n  margin: 16px 0;\n  color: #414552;\n}\n```\nOptionally install `prism-react-renderer` for syntax highlighting. The current docs only have 2 JSON code blocks, but the SDK docs will grow. If adding syntax highlighting, use a light theme that matches the neutral palette.\n\n### Inline code\n```css\ncode {\n  background: #f6f8fa;\n  border-radius: 4px;\n  padding: 2px 6px;\n  font-family: var(--font-mono);\n  font-size: 0.875em; /* slightly smaller than surrounding text */\n}\n/* Don't style code inside pre blocks */\npre code {\n  background: none;\n  border-radius: 0;\n  padding: 0;\n  font-size: inherit;\n}\n```\n\n### Links\n```css\na {\n  color: #0570de;\n  text-decoration: none;\n}\na:hover {\n  color: #0055bc;\n  text-decoration: underline;\n}\n```\n\n### Headings\n```css\nh1 { font-size: 32px; font-weight: 700; color: #21252c; margin-top: 0; margin-bottom: 16px; line-height: 1.25; }\nh2 { font-size: 24px; font-weight: 700; color: #353a44; margin-top: 48px; margin-bottom: 12px; line-height: 1.3; }\nh3 { font-size: 20px; font-weight: 600; color: #353a44; margin-top: 32px; margin-bottom: 8px; line-height: 1.4; }\nh4 { font-size: 16px; font-weight: 600; color: #353a44; margin-top: 24px; margin-bottom: 8px; line-height: 1.5; }\n```\n\nNote: `h2` has 48px top margin to create strong visual section breaks (the largest gaps on the page). This is a key Stripe pattern.\n\n### Pagination (prev/next)\n```css\n.pagination {\n  display: flex;\n  justify-content: space-between;\n  margin-top: 48px;\n  padding-top: 24px;\n  border-top: 1px solid #ebeef1;\n}\n.pagination a {\n  color: #0570de;\n  font-weight: 500;\n}\n```\n\n### Lists\n```css\nul, ol {\n  padding-left: 24px;\n  margin: 12px 0;\n}\nli {\n  margin: 6px 0;\n  line-height: 1.65;\n}\nli \u003e p { margin: 0; }\n```\n\n### Blockquotes\n```css\nblockquote {\n  border-left: 4px solid #ebeef1;\n  padding: 0 16px;\n  margin: 16px 0;\n  color: #687385;\n}\n```\n\n### Horizontal rules\n```css\nhr {\n  border: none;\n  border-top: 1px solid #ebeef1;\n  margin: 32px 0;\n}\n```\n\n## Responsive Breakpoints\n```css\n/* Mobile: \u003c 768px - sidebar and TOC hidden, content full width */\n/* Tablet: 768px - 1040px - sidebar visible, TOC hidden */\n/* Desktop: \u003e 1040px - full three-column layout */\n```\n\nOn mobile:\n- Sidebar hidden behind hamburger menu\n- Right TOC hidden entirely\n- Content goes full-width with 16px horizontal padding\n- Tables get `overflow-x: auto` wrapper\n\n## Shadow System\nShadows are used very sparingly -- almost never on the docs site:\n- Most elements: no shadow (flat)\n- Card hover: `0px 2px 5px rgba(48, 49, 61, 0.08)` (barely perceptible)\n- Dropdown/overlay: `0px 5px 15px rgba(0, 0, 0, 0.12), 0px 15px 35px rgba(48, 49, 61, 0.08)`\n\n## Border Radius\n- Inline code: 4px\n- Code blocks, callouts, cards: 6px\n- Buttons, tags, pills: 6px or rounded (9999em for pill shape)\n\n## Acceptance Criteria\n- All CSS is in `styles/globals.css` (or organized into CSS modules)\n- CSS custom properties are defined for colors, fonts, and spacing\n- System font stack is used (no custom font downloads)\n- Anti-aliased text rendering is enabled\n- All headings (H1-H4) follow the type scale with proper size, weight, color, and spacing\n- Body text is 16px, dark gray (#414552), line-height 1.65\n- Links are blue (#0570de), darken on hover, no underline by default\n- Tables are clean: no outer borders, header has bottom border only, proper padding\n- Code blocks have light gray background, rounded corners, monospace font\n- Inline code has subtle gray background pill\n- Callout boxes have colored left border and tinted background per type\n- Columns stack on mobile, flex row on desktop\n- Layout uses three columns on desktop (sidebar 240px, content ~720px, TOC ~200px)\n- Sidebar has 1px right border, section headers in uppercase small text\n- Active nav item has bold text and subtle background\n- Right TOC has scroll spy highlighting in blue\n- Responsive: sidebar/TOC collapse below 768px/1040px breakpoints\n- Pagination has top border separator and blue link text\n- The overall feel is clean, white, professional, content-focused -- no decorative elements, no gradients, no heavy shadows\n- The page looks like it could belong to the same family as docs.stripe.com\n","status":"closed","priority":2,"issue_type":"epic","owner":"sharfy.adamantine@gmail.com","created_at":"2026-02-13T13:43:24.486687+13:00","created_by":"Sharfy Adamantine","updated_at":"2026-02-14T13:18:01.287139+13:00","closed_at":"2026-02-14T13:18:01.287141+13:00","dependencies":[{"issue_id":"docs-yne","depends_on_id":"docs-c34","type":"blocks","created_at":"2026-02-13T13:43:24.48892+13:00","created_by":"Sharfy Adamantine"},{"issue_id":"docs-yne","depends_on_id":"docs-vbw","type":"blocks","created_at":"2026-02-13T13:43:24.490264+13:00","created_by":"Sharfy Adamantine"},{"issue_id":"docs-yne","depends_on_id":"docs-7dv","type":"blocks","created_at":"2026-02-13T13:43:24.491023+13:00","created_by":"Sharfy Adamantine"}]}
